<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2c: g2cfile.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2c
   &#160;<span id="projectnumber">1.8.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('g2cfile_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">g2cfile.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="g2cfile_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="grib2__int_8h.html">grib2_int.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="g2cdegrib2_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">   10</a></span>&#160;<a class="code" href="grib2__int_8h.html#structg2c__file__info">G2C_FILE_INFO_T</a> <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[<a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a> + 1];</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#afd7e03b89e0711bca4a47eb59926a4c4">   13</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="g2cfile_8c.html#afd7e03b89e0711bca4a47eb59926a4c4">g2c_next_g2cid</a> = 1;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">   16</a></span>&#160;<span class="preprocessor">#define MIN(a,b) ((a) &lt; (b) ? (a) : (b))</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a4245ea3fba0358165b402a7a615419bb">   19</a></span>&#160;<span class="preprocessor">#define READ_BUF_SIZE 4092</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#aa13705298bc1de257ed922f999da7c1c">   22</a></span>&#160;<span class="preprocessor">#define BYTES_TO_DISCIPLINE 6</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a51cfcbcc556e03f4347510eb7613344d">   25</a></span>&#160;<a class="code" href="g2cfile_8c.html#a51cfcbcc556e03f4347510eb7613344d">MUTEX</a>(m);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#afa9f4de2d5c14d0e8d26ae7f502b0267">   27</a></span>&#160;<span class="preprocessor">#define G2C_SEEKMSG_BUFSIZE 4092 </span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="g2ccompare_8c.html#a074a9283d6ed7957967f08c981a93e77">   30</a></span>&#160;<span class="keyword">extern</span> <a class="code" href="grib2__int_8h.html#structg2c__file__info">G2C_FILE_INFO_T</a> <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[<a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a> + 1];</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#af50a08963916901ddae4e32a81fec8f5">   56</a></span>&#160;<a class="code" href="g2cfile_8c.html#af50a08963916901ddae4e32a81fec8f5">g2c_seekmsg</a>(<span class="keywordtype">int</span> g2cid, <span class="keywordtype">size_t</span> skip, <span class="keywordtype">size_t</span> *offset, <span class="keywordtype">size_t</span> *msglen)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">size_t</span> k4;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">int</span> k, lim;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">int</span> end;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *cbuf;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">size_t</span> bytes_read = <a class="code" href="g2cfile_8c.html#afa9f4de2d5c14d0e8d26ae7f502b0267">G2C_SEEKMSG_BUFSIZE</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">size_t</span> my_msglen = 0, my_offset = 0, ipos;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">/* Find the open file struct. */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].g2cid != g2cid)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;g2c_seekgb skip %ld&quot;</span>, skip));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">/* Get memory to read in some of the file. */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (!(cbuf = malloc(<a class="code" href="g2cfile_8c.html#afa9f4de2d5c14d0e8d26ae7f502b0267">G2C_SEEKMSG_BUFSIZE</a>)))</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    ipos = skip;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">/* Loop until grib message is found. */</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">while</span> (my_msglen == 0 &amp;&amp; bytes_read == <a class="code" href="g2cfile_8c.html#afa9f4de2d5c14d0e8d26ae7f502b0267">G2C_SEEKMSG_BUFSIZE</a>)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">/* Read partial section. */</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span> (fseek(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f, ipos, SEEK_SET))</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            free(cbuf);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        bytes_read = fread(cbuf, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>), <a class="code" href="g2cfile_8c.html#afa9f4de2d5c14d0e8d26ae7f502b0267">G2C_SEEKMSG_BUFSIZE</a>, <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        lim = bytes_read - 8;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">/* Look for &#39;GRIB...2&#39; in partial section. */</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; lim; k++)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordflow">if</span> (!strncmp((<span class="keywordtype">char</span> *)&amp;cbuf[k], <a class="code" href="grib2__int_8h.html#a509882196b78bdf75ee36d1d1bf0cc35">G2C_MAGIC_HEADER</a>, strlen(<a class="code" href="grib2__int_8h.html#a509882196b78bdf75ee36d1d1bf0cc35">G2C_MAGIC_HEADER</a>)) &amp;&amp; cbuf[k + 7] == 2)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <span class="comment">/* Find the length of the message. This is stored as</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">                 * an 8-byte big-endian integer starting at positon</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">                 * 8 in cbuf. */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                my_msglen = <a class="code" href="grib2__int_8h.html#ad4e90614132aeb5308bffc79b342c519">hton64</a>(*(<span class="keywordtype">size_t</span> *)&amp;cbuf[k + 8]);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;my_msglen %ld&quot;</span>, my_msglen));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="comment">/* Read the last 4 bytes of the message. */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">if</span> (fseek(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f, ipos + k + my_msglen - 4, SEEK_SET))</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    free(cbuf);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">if</span> ((k4 = fread(&amp;end, 4, 1, <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f)) != 1)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    free(cbuf);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <span class="comment">/* Look for &#39;7777&#39; at end of grib message. */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <span class="keywordflow">if</span> (k4 == 1 &amp;&amp; end == 926365495)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    <span class="comment">/* GRIB message found. */</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    my_offset = ipos + k;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;found end of message my_offset %ld&quot;</span>, my_offset));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        ipos = ipos + lim;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/* Free resources. */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    free(cbuf);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/* Return information to the caller. */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (offset)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        *offset = my_offset;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (msglen)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        *msglen = my_msglen;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#ab4cbbee608ee075df75f19c67188aa9c">  164</a></span>&#160;<a class="code" href="g2cfile_8c.html#ab4cbbee608ee075df75f19c67188aa9c">g2c_find_msg2</a>(<span class="keywordtype">int</span> g2cid, <span class="keywordtype">size_t</span> skip_bytes, <span class="keywordtype">size_t</span> max_bytes, <span class="keywordtype">size_t</span> *bytes_to_msg,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;              <span class="keywordtype">size_t</span> *bytes_in_msg)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">size_t</span> bytes_to_read = <a class="code" href="g2cfile_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<a class="code" href="g2cfile_8c.html#a4245ea3fba0358165b402a7a615419bb">READ_BUF_SIZE</a>, max_bytes);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">size_t</span> bytes_read;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buf;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">int</span> grib_version;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">int</span> eof = 0;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">int</span> msg_found = 0;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">size_t</span> num_blocks;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">size_t</span> ftell_pos;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">int</span> done = 0;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">/* Check inputs. */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!bytes_to_msg || !bytes_in_msg)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">/* Find the open file struct. */</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].g2cid != g2cid)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">/* Skip some bytes if desired. */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (fseek(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f, (off_t)skip_bytes, SEEK_SET))</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a898aa73781e9952c3e56ed3282a873f4">G2C_ERROR</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">/* Allocate storage to read into. */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (!(buf = calloc(bytes_to_read, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>))))</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">for</span> (num_blocks = 0; !eof &amp;&amp; !done; num_blocks++)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">/* Read some bytes. If we don&#39;t get the number expected, either a</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">         * read error occured, or we reached the end of file. */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span> ((ftell_pos = ftell(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f)) == -1)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;before read ftell() is %ld (0x%x) reading %ld bytes&quot;</span>, ftell_pos,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;             ftell_pos, bytes_to_read));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span> ((bytes_read = fread(buf, 1, bytes_to_read, <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f)) != bytes_to_read)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">if</span> (ferror(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f))</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                ret = <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            eof++;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">/* Scan for &#39;GRIB2&#39; in the bytes we have read. */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; bytes_read; i++)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#ifdef LOGGING</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="comment">/* if (i &lt; 10) LOG((3, &quot;buf[%ld] = %2.2x&quot;, i, buf[i])); */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">/* Find the beginning of a GRIB message. */</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordflow">if</span> (buf[i] == <span class="charliteral">&#39;G&#39;</span> &amp;&amp; i &lt; bytes_read - <a class="code" href="grib2__int_8h.html#a240eb2cfb06a088831f356621ffbd629">G2C_MAGIC_HEADER_LEN</a></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    &amp;&amp; buf[i + 1] == <span class="charliteral">&#39;R&#39;</span> &amp;&amp; buf[i + 2] == <span class="charliteral">&#39;I&#39;</span> &amp;&amp; buf[i + 3] == <span class="charliteral">&#39;B&#39;</span>)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    msg_found++;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    *bytes_to_msg = ftell_pos + i;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    grib_version = buf[i + 7];</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;bytes_to_msg %ld grib_version %d&quot;</span>, *bytes_to_msg, grib_version));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="keywordflow">if</span> (grib_version != 1 &amp;&amp; grib_version != 2)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                        ret = <a class="code" href="grib2_8h.html#a024050c81e4981bea2cb67c27e8a8072">G2C_EMSG</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                        done++;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="comment">/* Find the end of a GRIB message. And then we&#39;re done. */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">if</span> (msg_found &amp;&amp; buf[i] == <span class="charliteral">&#39;7&#39;</span> &amp;&amp; i &lt; bytes_read - <a class="code" href="grib2__int_8h.html#a240eb2cfb06a088831f356621ffbd629">G2C_MAGIC_HEADER_LEN</a></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    &amp;&amp; buf[i + 1] == <span class="charliteral">&#39;7&#39;</span> &amp;&amp; buf[i + 2] == <span class="charliteral">&#39;7&#39;</span> &amp;&amp; buf[i + 3] == <span class="charliteral">&#39;7&#39;</span>)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    msg_found--;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    *bytes_in_msg = ftell_pos + i - *bytes_to_msg + 4;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;bytes_in_msg %ld&quot;</span>, *bytes_in_msg));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    done++;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">/* Back up 8 bytes in case the &quot;GRIB&quot; magic header occurred</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">         * within the last 8 bytes of the previous read. */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> (!done)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">if</span> (fseek(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f, (off_t)(ftell(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f) - <a class="code" href="grib2__int_8h.html#a240eb2cfb06a088831f356621ffbd629">G2C_MAGIC_HEADER_LEN</a>),</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                      SEEK_SET))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a898aa73781e9952c3e56ed3282a873f4">G2C_ERROR</a>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">/* Free storage. */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    free(buf);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a977358be2d226299f842cb298b779854">  293</a></span>&#160;<a class="code" href="g2cfile_8c.html#a977358be2d226299f842cb298b779854">g2c_get_msg</a>(<span class="keywordtype">int</span> g2cid, <span class="keywordtype">size_t</span> skip_bytes, <span class="keywordtype">size_t</span> max_bytes, <span class="keywordtype">size_t</span> *bytes_to_msg,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordtype">size_t</span> *bytes_in_msg, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **cbuf)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">size_t</span> bytes_read;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">/* Check inputs. */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (!bytes_to_msg || !bytes_in_msg || !cbuf || max_bytes &lt; <a class="code" href="grib2__int_8h.html#a8da09513416a4bd9ba4cfa1b291c0c85">G2C_MIN_MAX_BYTES</a>)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((2, <span class="stringliteral">&quot;g2c_get_msg g2cid %d skip_bytes %ld max_bytes %ld&quot;</span>, g2cid, skip_bytes,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         max_bytes));</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">/* Find the open file struct. */</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].g2cid != g2cid)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">/* Find the start and length of the GRIB message. */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a> bytes_to_msg_g, bytes_in_msg_g;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="seekgb_8c.html#a27edb1018106a2e02743be31afc5ea0c">seekgb</a>(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f, (<a class="code" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a>)skip_bytes, (<a class="code" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a>)max_bytes, &amp;bytes_to_msg_g,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;               &amp;bytes_in_msg_g);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        *bytes_to_msg = bytes_to_msg_g;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        *bytes_in_msg = bytes_in_msg_g;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;*bytes_to_msg %ld *bytes_in_msg %ld&quot;</span>, *bytes_to_msg, *bytes_in_msg));</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">/* If no message was found, return an error. */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (*bytes_in_msg == 0)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a2a68c6a57c0aec69ab864843b3727a78">G2C_ENOMSG</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">/* Allocate storage for the GRIB message. */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!(*cbuf = malloc(*bytes_in_msg)))</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">/* Position file at start of GRIB message. */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (fseek(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f, (off_t)*bytes_to_msg, SEEK_SET))</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#ifdef LOGGING</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordtype">int</span> my_errno = errno;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((0, <span class="stringliteral">&quot;fseek error %s&quot;</span>, strerror(my_errno)));</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a898aa73781e9952c3e56ed3282a873f4">G2C_ERROR</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">/* Read the message from the file into the buffer. */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> ((bytes_read = fread(*cbuf, 1, *bytes_in_msg, <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f)) != *bytes_in_msg)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#ifdef LOGGING</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 10; i++)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;cbuf[%d] = %2x&quot;</span>, i, (*cbuf)[i]));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#af251e6786990405633095ab288f06a06">  365</a></span>&#160;<a class="code" href="g2cfile_8c.html#af251e6786990405633095ab288f06a06">find_available_g2cid</a>(<span class="keywordtype">int</span> *g2cid)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (!g2cid)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">/* Find a new g2cid. */</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a> + 1; i++)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordtype">int</span> <span class="keywordtype">id</span> = (i + <a class="code" href="g2cfile_8c.html#afd7e03b89e0711bca4a47eb59926a4c4">g2c_next_g2cid</a>) % (<a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a> + 1);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">/* Is this ID available? If so, we&#39;re done. */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[<span class="keywordtype">id</span>].g2cid)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            *g2cid = id;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="g2cfile_8c.html#afd7e03b89e0711bca4a47eb59926a4c4">g2c_next_g2cid</a> = <span class="keywordtype">id</span> + 1;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">/* If we couldn&#39;t find one, all available files are already</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     * open. */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (i == <a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a> + 1)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        ret = <a class="code" href="grib2_8h.html#aa9eaa709aa71a9f4b164b979b9467ce1">G2C_ETOOMANYFILES</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a469752e68c9f6532ca2af09351146bf2">  418</a></span>&#160;<a class="code" href="g2cfile_8c.html#a469752e68c9f6532ca2af09351146bf2">determine_dims</a>(<a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__dim__info">G2C_DIM_INFO_T</a> *d0, *d1;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__section3__info">G2C_SECTION3_INFO_T</a> *sec3_info;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">int</span> d;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    sec3_info = (<a class="code" href="grib2__int_8h.html#structg2c__section3__info">G2C_SECTION3_INFO_T</a> *)(sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    d0 = &amp;(sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a242577f5fe354b2dd763690ba085ec4c">dim</a>[0]);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    d1 = &amp;(sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a242577f5fe354b2dd763690ba085ec4c">dim</a>[1]);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">/* Based on the grid definition template number, and the contents</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">     * of the template, decide the len, name, and values of the two</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">     * dimensions. */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">switch</span> (sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a49ce0f513e7723400907f777946fc6c4">grid_def</a>)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;determine_dim allocating storage for lat/lon values&quot;</span>));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        d0-&gt;<a class="code" href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">len</a> = sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[8];</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        strncpy(d0-&gt;<a class="code" href="grib2__int_8h.html#a72cb1219a1d21a7261b3ff4f6e6ea1c1">name</a>, <a class="code" href="grib2__int_8h.html#a63205f1ad14afc714149004a931abbce">LATITUDE</a>, <a class="code" href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">if</span> (!(d0-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a> = malloc(d0-&gt;<a class="code" href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">len</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>))))</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        d0-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a>[0] = sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[11];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">for</span> (d = 1; d &lt; d0-&gt;<a class="code" href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">len</a>; d++)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            d0-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a>[d] = d0-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a>[d - 1] - sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[16];</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        d1-&gt;<a class="code" href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">len</a> = sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[7];</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        strncpy(d1-&gt;<a class="code" href="grib2__int_8h.html#a72cb1219a1d21a7261b3ff4f6e6ea1c1">name</a>, <a class="code" href="grib2__int_8h.html#ab04a12985543a4277feae611d62718bf">LONGITUDE</a>, <a class="code" href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (!(d1-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a> = malloc(d1-&gt;<a class="code" href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">len</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>))))</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        d1-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a>[0] = sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[12];</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">for</span> (d = 1; d &lt; d1-&gt;<a class="code" href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">len</a>; d++)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            d1-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a>[d] = d1-&gt;<a class="code" href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">value</a>[d - 1] - sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[17];</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#af7f2e7b1cc0d81f73f972feaa4fc65c0">  481</a></span>&#160;<a class="code" href="g2cfile_8c.html#af7f2e7b1cc0d81f73f972feaa4fc65c0">g2c_rw_section3_metadata</a>(FILE *f, <span class="keywordtype">int</span> rw_flag, <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__section3__info">G2C_SECTION3_INFO_T</a> *sec3_info = NULL;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">int</span> maplen, needsext, map[<a class="code" href="grib2_8h.html#a6d73cbbc6177df2e5bc844798d8f2d2b">G2C_MAX_GDS_TEMPLATE_MAPLEN</a>];</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">int</span> t;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (!f || !sec)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (!rw_flag &amp;&amp; sec-&gt;<a class="code" href="grib2__int_8h.html#a8c079c93f9e85a2c75bd3fb5060fd907">sec_num</a> != 3)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((6, <span class="stringliteral">&quot;g2c_rw_section3_metadata starting to %s section 3 at file position %ld&quot;</span>,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;         rw_flag ? <span class="stringliteral">&quot;write&quot;</span> : <span class="stringliteral">&quot;read&quot;</span>, ftell(f)));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">/* If reading, allocate storage for a new section 3. */</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">if</span> (!(sec3_info = calloc(<span class="keyword">sizeof</span>(<a class="code" href="grib2__int_8h.html#structg2c__section3__info">G2C_SECTION3_INFO_T</a>), 1)))</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        sec3_info = sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">/* Read or write section 3. */</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;sec3_info-&gt;<a class="code" href="grib2__int_8h.html#ac5089b3aa084e111dcf76fe148d4cadc">source_grid_def</a>)))</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#af13561bb1b69477285058c02d2f053b2">g2c_file_io_uint</a>(f, rw_flag, &amp;sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a5916fc7041e507c7cfc797ef73699471">num_data_points</a>)))</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a646e4d619d5326e4168cfd9ea8890c01">num_opt</a>)))</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a761fd11af0a8e1d3b9eb147edb653b0b">interp_list</a>)))</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a0efe5cf31d683e3e6aa3144c82ab2a17">g2c_file_io_ushort</a>(f, rw_flag, &amp;sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a49ce0f513e7723400907f777946fc6c4">grid_def</a>)))</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;rw_section3_metadata source_grid_def %d num_data_points %d num_opt %d interp_list %d grid_def %d&quot;</span>,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         sec3_info-&gt;<a class="code" href="grib2__int_8h.html#ac5089b3aa084e111dcf76fe148d4cadc">source_grid_def</a>, sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a5916fc7041e507c7cfc797ef73699471">num_data_points</a>, sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a646e4d619d5326e4168cfd9ea8890c01">num_opt</a>, sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a761fd11af0a8e1d3b9eb147edb653b0b">interp_list</a>,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;         sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a49ce0f513e7723400907f777946fc6c4">grid_def</a>));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">/* Look up the information about this grid. */</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="gridtemplates_8c.html#af43657d544d6892fcfce2bb11a615ab6">g2c_get_grid_template</a>(sec3_info-&gt;<a class="code" href="grib2__int_8h.html#a49ce0f513e7723400907f777946fc6c4">grid_def</a>, &amp;maplen, map, &amp;needsext)))</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">/* When reading, allocate space to hold the template info. */</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#ac5827e102f2aaacc0abcbc5a5aafb678">template_len</a> = maplen;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">if</span> (!(sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a> = calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>) * maplen, 1)))</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="comment">/* Read or write the template info. */</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">for</span> (t = 0; t &lt; maplen; t++)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a2cb1faaeaddca5c428124e2611c9c58c">g2c_file_io_template</a>(f, rw_flag, map[t], &amp;sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[t])))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((7, <span class="stringliteral">&quot;template[%d] %d&quot;</span>, t, sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[t]));</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">/* Attach sec3_info to our section data. */</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a> = sec3_info;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">/* Figure out the dimensions, if we can. */</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#a469752e68c9f6532ca2af09351146bf2">determine_dims</a>(sec)))</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((6, <span class="stringliteral">&quot;finished reading or writing section 3 at file position %ld&quot;</span>, ftell(f)));</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#af7fef1bd5fae59a765ccfa3493c20699">  577</a></span>&#160;<a class="code" href="g2cfile_8c.html#af7fef1bd5fae59a765ccfa3493c20699">g2c_rw_section4_metadata</a>(FILE *f, <span class="keywordtype">int</span> rw_flag, <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__section4__info">G2C_SECTION4_INFO_T</a> *sec4_info;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">int</span> maplen, needsext, map[<a class="code" href="grib2_8h.html#ac46d9ca4e9715c77dd63ee6a3a3ecab5">G2C_MAX_PDS_TEMPLATE_MAPLEN</a>];</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordtype">int</span> t;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (!f || !sec)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (!rw_flag &amp;&amp; sec-&gt;<a class="code" href="grib2__int_8h.html#a8c079c93f9e85a2c75bd3fb5060fd907">sec_num</a> != 4)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;read_section4_metadata rw_flag %d&quot;</span>, rw_flag));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">/* When reading, allocate storage for a new section 4. */</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span> (!(sec4_info = calloc(<span class="keyword">sizeof</span>(<a class="code" href="grib2__int_8h.html#structg2c__section4__info">G2C_SECTION4_INFO_T</a>), 1)))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        sec4_info = sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">/* When reading, assign a number to this field, and count the</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">     * number of fields in the message. */</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        sec4_info-&gt;field_num = sec-&gt;<a class="code" href="grib2__int_8h.html#afa38d80d5790033707db560070c8b0a3">msg</a>-&gt;<a class="code" href="grib2__int_8h.html#a85954382df1adfd1066de85f7d790ad7">num_fields</a>++;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((6, <span class="stringliteral">&quot;reading section 4 starting at file position %ld&quot;</span>, ftell(f)));</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">/* Read section 4. */</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a0efe5cf31d683e3e6aa3144c82ab2a17">g2c_file_io_ushort</a>(f, rw_flag, &amp;sec4_info-&gt;<a class="code" href="grib2__int_8h.html#a5c5c17ef34f6f6401cf4ebd9a3fbf9b0">num_coord</a>)))</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a0efe5cf31d683e3e6aa3144c82ab2a17">g2c_file_io_ushort</a>(f, rw_flag, &amp;sec4_info-&gt;<a class="code" href="grib2__int_8h.html#affe809d466e10244055a71487aaa43cb">prod_def</a>)))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;read_section4_metadata num_coord %d prod_def %d&quot;</span>, sec4_info-&gt;<a class="code" href="grib2__int_8h.html#a5c5c17ef34f6f6401cf4ebd9a3fbf9b0">num_coord</a>, sec4_info-&gt;<a class="code" href="grib2__int_8h.html#affe809d466e10244055a71487aaa43cb">prod_def</a>));</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">/* Look up the information about this grid. */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="pdstemplates_8c.html#a5d014a6e14c17d59ce83f78ca048d86b">g2c_get_pds_template</a>(sec4_info-&gt;<a class="code" href="grib2__int_8h.html#affe809d466e10244055a71487aaa43cb">prod_def</a>, &amp;maplen, map, &amp;needsext)))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;pds template maplen %d&quot;</span>, maplen));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">/* When reading, allocate space to hold the template info. */</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#ac5827e102f2aaacc0abcbc5a5aafb678">template_len</a> = maplen;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span> (!(sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a> = calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>) * maplen, 1)))</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">/* Read or write the template info. */</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">for</span> (t = 0; t &lt; maplen; t++)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a2cb1faaeaddca5c428124e2611c9c58c">g2c_file_io_template</a>(f, rw_flag, map[t], &amp;sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[t])))</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((7, <span class="stringliteral">&quot;template[%d] %d&quot;</span>, t, sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[t]));</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">/* When reading, attach sec4_info to our section data. */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a> = sec4_info;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#abd2e0851785661aee3f32380c9d8fdf0">  666</a></span>&#160;<a class="code" href="g2cfile_8c.html#abd2e0851785661aee3f32380c9d8fdf0">g2c_rw_section5_metadata</a>(FILE *f, <span class="keywordtype">int</span> rw_flag, <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__section5__info">G2C_SECTION5_INFO_T</a> *sec5_info;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordtype">int</span> maplen, needsext, map[<a class="code" href="grib2_8h.html#ac46d9ca4e9715c77dd63ee6a3a3ecab5">G2C_MAX_PDS_TEMPLATE_MAPLEN</a>];</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordtype">int</span> t;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> (!f || !sec)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;g2c_rw_section5_metadata rw_flag %d at file position %ld&quot;</span>, rw_flag,</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         ftell(f)));</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">/* When reading, allocate storage for a new section 5. When</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">     * writing, get a pointer to the exitsing sec5_info. */</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> (!(sec5_info = calloc(<span class="keyword">sizeof</span>(<a class="code" href="grib2__int_8h.html#structg2c__section5__info">G2C_SECTION5_INFO_T</a>), 1)))</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        sec5_info = sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">/* Read section 5. */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#af13561bb1b69477285058c02d2f053b2">g2c_file_io_uint</a>(f, rw_flag, &amp;sec5_info-&gt;<a class="code" href="grib2__int_8h.html#a901fe0745e77a8f83cc94e45343c2128">num_data_points</a>)))</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a0efe5cf31d683e3e6aa3144c82ab2a17">g2c_file_io_ushort</a>(f, rw_flag, &amp;sec5_info-&gt;<a class="code" href="grib2__int_8h.html#aeb41d96ee4ff703298807472e6d73ba5">data_def</a>)))</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;g2c_rw_section5_metadata num_data_points %d data_def %d&quot;</span>,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;         sec5_info-&gt;<a class="code" href="grib2__int_8h.html#a901fe0745e77a8f83cc94e45343c2128">num_data_points</a>, sec5_info-&gt;<a class="code" href="grib2__int_8h.html#aeb41d96ee4ff703298807472e6d73ba5">data_def</a>));</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">/* Look up the information about this grid. */</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="drstemplates_8c.html#aa9a9b32379db85395891b59213f08a5d">g2c_get_drs_template</a>(sec5_info-&gt;<a class="code" href="grib2__int_8h.html#aeb41d96ee4ff703298807472e6d73ba5">data_def</a>, &amp;maplen, map, &amp;needsext)))</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;grid template maplen %d&quot;</span>, maplen));</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">/* WHen reading, allocate space to hold the template info. */</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#ac5827e102f2aaacc0abcbc5a5aafb678">template_len</a> = maplen;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (!(sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a> = calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>) * maplen, 1)))</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">/* Read or write the template info. */</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">for</span> (t = 0; t &lt; maplen; t++)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a2cb1faaeaddca5c428124e2611c9c58c">g2c_file_io_template</a>(f, rw_flag, map[t], &amp;sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[t])))</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((7, <span class="stringliteral">&quot;template[%d] %d&quot;</span>, t, sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>[t]));</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">/* When reading, attach sec5_info to our section data. */</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a> = sec5_info;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a767dd5916869dc53f395903d613075cb">  748</a></span>&#160;<a class="code" href="g2cfile_8c.html#a767dd5916869dc53f395903d613075cb">g2c_rw_section6_metadata</a>(FILE *f, <span class="keywordtype">int</span> rw_flag, <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__section6__info">G2C_SECTION6_INFO_T</a> *sec6_info;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (!f || !sec)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((6, <span class="stringliteral">&quot;g2c_rw_section6_metadata rw_flag %d at file position %ld&quot;</span>, rw_flag,</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         ftell(f)));</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">/* When reading, allocate storage for a new section 6. When</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">     * writing, get a pointer to the exitsing sec6_info. */</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">if</span> (!(sec6_info = calloc(<span class="keyword">sizeof</span>(<a class="code" href="grib2__int_8h.html#structg2c__section6__info">G2C_SECTION6_INFO_T</a>), 1)))</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        sec6_info = sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">/* Read section 6. */</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;sec6_info-&gt;<a class="code" href="grib2__int_8h.html#a9974cef2b24b092ce879c1f65c6ed88c">indicator</a>)))</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;g2c_rw_section6_metadata indicator %d&quot;</span>, sec6_info-&gt;<a class="code" href="grib2__int_8h.html#a9974cef2b24b092ce879c1f65c6ed88c">indicator</a>));</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">/* When reading, attach sec6_info to our section data. */</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (!rw_flag)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a> = sec6_info;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a9b77b4fddeb0b4e4d136bb7c2460b7cc">  797</a></span>&#160;<a class="code" href="g2cfile_8c.html#a9b77b4fddeb0b4e4d136bb7c2460b7cc">add_section</a>(FILE *f, <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *msg, <span class="keywordtype">int</span> sec_id, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sec_len,</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="keywordtype">size_t</span> bytes_to_sec, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sec_num)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;{</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;add_section sec_id %d sec_len %d, bytes_to_sec %ld, sec_num %d&quot;</span>,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         sec_id, sec_len, bytes_to_sec, sec_num));</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="comment">/* Allocate storage for a new section. */</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (!(sec = calloc(<span class="keyword">sizeof</span>(<a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a>), 1)))</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">/* Add sec to end of linked list. */</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> (!msg-&gt;<a class="code" href="grib2__int_8h.html#a1dff2889177040680db6291b350c9d1c">sec</a>)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        msg-&gt;<a class="code" href="grib2__int_8h.html#a1dff2889177040680db6291b350c9d1c">sec</a> = sec;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *s;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">for</span> (s = msg-&gt;<a class="code" href="grib2__int_8h.html#a1dff2889177040680db6291b350c9d1c">sec</a>; s-&gt;<a class="code" href="grib2__int_8h.html#a1c00621e95d7abedb7b7d929cfb2f34a">next</a>; s = s-&gt;<a class="code" href="grib2__int_8h.html#a1c00621e95d7abedb7b7d929cfb2f34a">next</a>)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            ;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        s-&gt;<a class="code" href="grib2__int_8h.html#a1c00621e95d7abedb7b7d929cfb2f34a">next</a> = sec;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        sec-&gt;<a class="code" href="grib2__int_8h.html#a7f81c8fcd129ef70ad65140d6161668a">prev</a> = s;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="comment">/* Remember values. */</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    sec-&gt;<a class="code" href="grib2__int_8h.html#afa38d80d5790033707db560070c8b0a3">msg</a> = msg;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    sec-&gt;<a class="code" href="grib2__int_8h.html#a2320bf6fe88358a510c67d695395d94d">sec_id</a> = sec_id;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    sec-&gt;<a class="code" href="grib2__int_8h.html#a9adc2635c9c81b265f32cbce68b1b474">sec_len</a> = sec_len;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    sec-&gt;<a class="code" href="grib2__int_8h.html#a8c079c93f9e85a2c75bd3fb5060fd907">sec_num</a> = sec_num;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    sec-&gt;<a class="code" href="grib2__int_8h.html#aab2569498daaf959c3836f15ee38276d">bytes_to_sec</a> = bytes_to_sec;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">switch</span> (sec_num)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        msg-&gt;<a class="code" href="grib2__int_8h.html#a6239752e3aa457d9dce277385ca3e75b">num_local</a>++;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#af7f2e7b1cc0d81f73f972feaa4fc65c0">g2c_rw_section3_metadata</a>(f, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, sec)))</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#af7fef1bd5fae59a765ccfa3493c20699">g2c_rw_section4_metadata</a>(f, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, sec)))</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#abd2e0851785661aee3f32380c9d8fdf0">g2c_rw_section5_metadata</a>(f, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, sec)))</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">case</span> 6:</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#a767dd5916869dc53f395903d613075cb">g2c_rw_section6_metadata</a>(f, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, sec)))</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">case</span> 7:</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#aad36614cfd2153c4494969a2f5c3b9ed">G2C_EBADSECTION</a>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#ae7843e51976900337654503388d9a726">  877</a></span>&#160;<a class="code" href="g2cfile_8c.html#ae7843e51976900337654503388d9a726">g2c_rw_section1_metadata</a>(FILE *f, <span class="keywordtype">int</span> rw_flag, <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *msg)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;{</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sec_num = 1;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((2, <span class="stringliteral">&quot;g2c_rw_section1_metadata rw_flag %d&quot;</span>, rw_flag));</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">/* Read the section. */</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#af13561bb1b69477285058c02d2f053b2">g2c_file_io_uint</a>(f, rw_flag, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)&amp;msg-&gt;<a class="code" href="grib2__int_8h.html#af33ecc99c8b4f4240c69a380b73774f4">sec1_len</a>)))</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;sec_num)))</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (!rw_flag &amp;&amp; sec_num != 1) <span class="comment">/* When reading sec num must be 1. */</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a4dcc89afa62b38a9a0d7a4df8d9f8ca7">G2C_ENOSECTION</a>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a938ee5c56d3896e1bfb6682eeac6d6c2">g2c_file_io_short</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#afca06e92d8dcf3c8f1172f3414ab870a">center</a>)))</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a938ee5c56d3896e1bfb6682eeac6d6c2">g2c_file_io_short</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a21a8c63eb7714bf474d25a32017b127f">subcenter</a>)))</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a269f23c98537183178c3ebc9f6d915fd">master_version</a>)))</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#acaf5f4deaef680af27ba1b626a4a7acc">local_version</a>)))</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a626f386b445c0d2910d680559621c194">sig_ref_time</a>)))</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#a938ee5c56d3896e1bfb6682eeac6d6c2">g2c_file_io_short</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#aa656185846e3574abd79f57b1ee3d899">year</a>)))</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#adcef6b4e7c590e2a2fc37308d1c7d96a">month</a>)))</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#abecb87ff997d6d0f929ba1a770f0621b">day</a>)))</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a4bca22c62bed41329e62bea27ee745b3">hour</a>)))</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a5815202ac6ed7cb3e380093dd6602262">minute</a>)))</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#abc902f5b888b64b5004b189d25550c99">second</a>)))</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#aab42481c672ffe6236cda6027d174a61">status</a>)))</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(f, rw_flag, &amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a4632cb054d0f24d1f39f7e174bc40e28">type</a>)))</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">/* Section 1 may contain optional numbers at the end of the</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">     * section. The sec1_len tells us if there are extra values. If</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">     * so, skip them. */</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="grib2__int_8h.html#af33ecc99c8b4f4240c69a380b73774f4">sec1_len</a> &gt; <a class="code" href="grib2_8h.html#afd42b8eddf696ef63f54a6265ebc69f9">G2C_SECTION1_BYTES</a>)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        fseek(f, msg-&gt;<a class="code" href="grib2__int_8h.html#af33ecc99c8b4f4240c69a380b73774f4">sec1_len</a> - <a class="code" href="grib2_8h.html#afd42b8eddf696ef63f54a6265ebc69f9">G2C_SECTION1_BYTES</a>, SEEK_CUR);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a666d5536f6359a1e357d5518413b6381">  940</a></span>&#160;<a class="code" href="g2cfile_8c.html#a666d5536f6359a1e357d5518413b6381">read_msg_metadata</a>(<a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *msg)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;{</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordtype">int</span> total_read = <a class="code" href="grib2_8h.html#af04bb40930441ec99376ed72bf18684e">G2C_SECTION0_BYTES</a>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordtype">int</span> sec_id = 0;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((6, <span class="stringliteral">&quot;read_msg_metadata file position %ld&quot;</span>, ftell(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>)));</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">/* Read section 0. */</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">if</span> (fseek(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, msg-&gt;<a class="code" href="grib2__int_8h.html#af149feb9c6a24df42c987bbadb5d2c18">bytes_to_msg</a> + <a class="code" href="g2cfile_8c.html#aa13705298bc1de257ed922f999da7c1c">BYTES_TO_DISCIPLINE</a>, SEEK_SET))</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> ((fread(&amp;msg-&gt;<a class="code" href="grib2__int_8h.html#a6ae662fc009939e70b82141e1671a0bb">discipline</a>, <a class="code" href="grib2__int_8h.html#ab6ab60c8c7e1f9fa0d00ea25b917a7e1">ONE_BYTE</a>, 1, msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>)) != 1)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="comment">/* Skip to section 1. */</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (fseek(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, 9, SEEK_CUR))</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">/* Read section 1. */</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#ae7843e51976900337654503388d9a726">g2c_rw_section1_metadata</a>(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, msg)))</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    total_read += msg-&gt;<a class="code" href="grib2__int_8h.html#af33ecc99c8b4f4240c69a380b73774f4">sec1_len</a>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">/* Read the sections. */</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">while</span> (total_read &lt; msg-&gt;bytes_in_msg - <a class="code" href="grib2__int_8h.html#a2d4f4340b41c07ec8fc52ff19aa23ec4">FOUR_BYTES</a>)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sec_len;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sec_num;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;reading new section at file position %ld&quot;</span>, ftell(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>)));</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="comment">/* Read section length. */</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#af13561bb1b69477285058c02d2f053b2">g2c_file_io_uint</a>(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, &amp;sec_len)))</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="comment">/* A section length of 926365495 indicates we&#39;ve reached</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">         * section 8, the end of the message. */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">if</span> (sec_len != 926365495)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <span class="comment">/* Read section number. */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a>(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, <a class="code" href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a>, &amp;sec_num)))</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;sec_len %d sec_num %d&quot;</span>, sec_len, sec_num));</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <span class="comment">/* Add a new section to our list of sections. */</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#a9b77b4fddeb0b4e4d136bb7c2460b7cc">add_section</a>(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, msg, sec_id++, sec_len, total_read, sec_num)))</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#aad36614cfd2153c4494969a2f5c3b9ed">G2C_EBADSECTION</a>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="comment">/* Skip to next section. */</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            total_read += sec_len;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((4, <span class="stringliteral">&quot;total_read %d&quot;</span>, total_read));</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <span class="keywordflow">if</span> (fseek(msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a>, msg-&gt;<a class="code" href="grib2__int_8h.html#af149feb9c6a24df42c987bbadb5d2c18">bytes_to_msg</a> + total_read, SEEK_SET))</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a9474e2c676b3c163bcbd2b928fd509f3"> 1020</a></span>&#160;<a class="code" href="g2cfile_8c.html#a9474e2c676b3c163bcbd2b928fd509f3">add_msg</a>(<a class="code" href="grib2__int_8h.html#structg2c__file__info">G2C_FILE_INFO_T</a> *file, <span class="keywordtype">int</span> msg_num, <span class="keywordtype">size_t</span> bytes_to_msg, <span class="keywordtype">size_t</span> bytes_in_msg,</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordtype">int</span> read_file, <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> **msg)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;{</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *my_msg;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;add_msg msg_num %d bytes_to_msg %ld bytes_in_msg %ld read_file %d&quot;</span>,</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;         msg_num, bytes_to_msg, bytes_in_msg, read_file));</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">/* Allocate storage for a new message. */</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (!(my_msg = calloc(<span class="keyword">sizeof</span>(<a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a>), 1)))</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="comment">/* Add my_msg to end of linked list. */</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">if</span> (!file-&gt;<a class="code" href="grib2__int_8h.html#ab6826be68665930ed928662d56c671e3">msg</a>)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        file-&gt;<a class="code" href="grib2__int_8h.html#ab6826be68665930ed928662d56c671e3">msg</a> = my_msg;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *m;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keywordflow">for</span> (m = file-&gt;<a class="code" href="grib2__int_8h.html#ab6826be68665930ed928662d56c671e3">msg</a>; m-&gt;<a class="code" href="grib2__int_8h.html#af9828d4b2656003825bd4aa83dc14d26">next</a>; m = m-&gt;<a class="code" href="grib2__int_8h.html#af9828d4b2656003825bd4aa83dc14d26">next</a>)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            ;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        m-&gt;<a class="code" href="grib2__int_8h.html#af9828d4b2656003825bd4aa83dc14d26">next</a> = my_msg;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="comment">/* Remember values. */</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    my_msg-&gt;<a class="code" href="grib2__int_8h.html#ae400e26b01043c449c39de9cf6629c88">msg_num</a> = msg_num;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    my_msg-&gt;<a class="code" href="grib2__int_8h.html#af149feb9c6a24df42c987bbadb5d2c18">bytes_to_msg</a> = bytes_to_msg;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    my_msg-&gt;<a class="code" href="grib2__int_8h.html#a7eccf6cd6fa0f202a1c71c5af338d227">bytes_in_msg</a> = bytes_in_msg;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    my_msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a> = file;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">/* Read message metadata. We do this if we are opening a GRIB2</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">     * data file, but not if we are reading a GRIB2 index file. */</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (read_file)</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#a666d5536f6359a1e357d5518413b6381">read_msg_metadata</a>(my_msg)))</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">/* Increment number of messages in the file. */</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    my_msg-&gt;<a class="code" href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">file</a>-&gt;<a class="code" href="grib2__int_8h.html#a5bb4a632dcaa3398c4557cfe52a81e35">num_messages</a>++;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">/* Return pointer to caller, if desired. */</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">if</span> (msg)</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        *msg = my_msg;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#acce12ea485669fe8604956b37b2126fb"> 1082</a></span>&#160;<a class="code" href="g2cfile_8c.html#acce12ea485669fe8604956b37b2126fb">read_metadata</a>(<span class="keywordtype">int</span> g2cid)</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;{</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordtype">size_t</span> msg_num;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordtype">size_t</span> file_pos = 0;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordtype">size_t</span> bytes_to_msg, bytes_in_msg;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">/* Find the open file struct. */</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].g2cid != g2cid)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((2, <span class="stringliteral">&quot;read_metadata g2cid %d&quot;</span>, g2cid));</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">/* Read each message in the file. */</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">for</span> (msg_num = 0; !ret; msg_num++)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="comment">/* Find the message. */</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#af50a08963916901ddae4e32a81fec8f5">g2c_seekmsg</a>(g2cid, file_pos, &amp;bytes_to_msg, &amp;bytes_in_msg)))</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((3, <span class="stringliteral">&quot;msg_num %d bytes_to_msg %ld bytes_in_msg %ld&quot;</span>, msg_num, bytes_to_msg,</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;             bytes_in_msg));</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="comment">/*  When there are 0 bytes_in_msg, we are done. */</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordflow">if</span> (!bytes_in_msg)</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="comment">/* Add new message to our list of messages. */</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#a9474e2c676b3c163bcbd2b928fd509f3">add_msg</a>(&amp;<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid], msg_num, bytes_to_msg, bytes_in_msg,</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                           1, NULL)))</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="comment">/* Move the file position to the end of this message, ready to</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">         * scan for the next message. */</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        file_pos = bytes_to_msg + bytes_in_msg;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((6, <span class="stringliteral">&quot;file_pos %ld&quot;</span>, file_pos));</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">/* If we run out of messages, that&#39;s success. */</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span> (ret == <a class="code" href="grib2_8h.html#a2a68c6a57c0aec69ab864843b3727a78">G2C_ENOMSG</a>)</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="preprocessor">#ifdef LOGGING</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">/* Print the file contents for library debugging. */</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="g2cutil_8c.html#acec6023ac37dbab9ac55c62a0ac14624">g2c_log_file</a>(g2cid);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#af12335d519df51c7331a8c4f343fb98a"> 1146</a></span>&#160;<a class="code" href="g2cfile_8c.html#af12335d519df51c7331a8c4f343fb98a">g2c_add_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keywordtype">int</span> mode, <span class="keywordtype">int</span> *g2cid)</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;{</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">/* Check inputs. */</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span> (strlen(path) &gt; <a class="code" href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a>)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a39bad0ee21628d9381fe409ec98214f1">G2C_ENAMETOOLONG</a>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (!g2cid)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((1, <span class="stringliteral">&quot;g2c_add_file path %s mode %d&quot;</span>, path, mode));</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">/* Find a file ID. */</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="g2cfile_8c.html#af251e6786990405633095ab288f06a06">find_available_g2cid</a>(g2cid)))</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">/* Open the file. */</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[*g2cid].f = fopen(path, (mode &amp; <a class="code" href="grib2_8h.html#a43712608ab00578dafcf3c39cff9582d">G2C_WRITE</a> ? <span class="stringliteral">&quot;rb+&quot;</span> : <span class="stringliteral">&quot;rb&quot;</span>))))</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">/* Copy the path. */</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    strncpy(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[*g2cid].path, path, <a class="code" href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">/* Remember the id. */</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[*g2cid].<a class="code" href="grib2__int_8h.html#a6c2582f1e1d3c5e49df28497d9264fcd">g2cid</a> = *g2cid;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">/* Initialize other values in struct. */</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[*g2cid].<a class="code" href="grib2__int_8h.html#ab6826be68665930ed928662d56c671e3">msg</a> = NULL;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[*g2cid].<a class="code" href="grib2__int_8h.html#a5bb4a632dcaa3398c4557cfe52a81e35">num_messages</a> = 0;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a216f2c45794641932725b7a8b1800423"> 1193</a></span>&#160;<a class="code" href="g2cfile_8c.html#a216f2c45794641932725b7a8b1800423">g2c_open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keywordtype">int</span> mode, <span class="keywordtype">int</span> *g2cid)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">/* If using threading, lock the mutex. */</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <a class="code" href="grib2__int_8h.html#af1b008061fe84eb508e6aef5b2e37f52">MUTEX_LOCK</a>(m);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">/* Open the file and add it to the list of open files. */</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    ret = <a class="code" href="g2cfile_8c.html#af12335d519df51c7331a8c4f343fb98a">g2c_add_file</a>(path, mode, g2cid);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">/* Read the metadata. */</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        ret = <a class="code" href="g2cfile_8c.html#acce12ea485669fe8604956b37b2126fb">read_metadata</a>(*g2cid);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">/* If using threading, unlock the mutex. */</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="grib2__int_8h.html#a2e449246cf2d393ed6973729785e9e0c">MUTEX_UNLOCK</a>(m);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;}</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;g2c_create(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keywordtype">int</span> cmode, <span class="keywordtype">int</span> *g2cid)</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;{</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordtype">int</span> my_g2cid;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="comment">/* Check inputs. */</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">if</span> (strlen(path) &gt; <a class="code" href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a>)</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a39bad0ee21628d9381fe409ec98214f1">G2C_ENAMETOOLONG</a>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">if</span> (!g2cid)</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((1, <span class="stringliteral">&quot;g2c_create path %s cmode %d&quot;</span>, path, cmode));</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">/* If NOCLOBBER, check if file exists. */</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">if</span> (cmode &amp; <a class="code" href="grib2_8h.html#a0f60a9a7769c124118754c22926b5ddf">G2C_NOCLOBBER</a>)</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        FILE *f;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">if</span> ((f = fopen(path, <span class="stringliteral">&quot;r&quot;</span>)))</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            fclose(f);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="comment">/* If using threading, lock the mutex. */</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <a class="code" href="grib2__int_8h.html#af1b008061fe84eb508e6aef5b2e37f52">MUTEX_LOCK</a>(m);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">/* Find a file ID. */</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    ret = <a class="code" href="g2cfile_8c.html#af251e6786990405633095ab288f06a06">find_available_g2cid</a>(&amp;my_g2cid);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">/* Create the file. */</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[my_g2cid].f = fopen(path, <span class="stringliteral">&quot;bw+&quot;</span>)))</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            ret = <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <span class="comment">/* Read the metadata. */</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="comment">/* Copy the path. */</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        strncpy(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[my_g2cid].path, path, <a class="code" href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a>);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="comment">/* Remember the id. */</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[my_g2cid].<a class="code" href="grib2__int_8h.html#a6c2582f1e1d3c5e49df28497d9264fcd">g2cid</a> = my_g2cid;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="comment">/* Pass id back to user. */</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        *g2cid = my_g2cid;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="comment">/* If using threading, unlock the mutex. */</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="grib2__int_8h.html#a2e449246cf2d393ed6973729785e9e0c">MUTEX_UNLOCK</a>(m);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;}</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#ab86d8501a831d9b263548f1664dc661c"> 1294</a></span>&#160;<a class="code" href="g2cfile_8c.html#ab86d8501a831d9b263548f1664dc661c">free_metadata</a>(<span class="keywordtype">int</span> g2cid)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *msg;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (g2cid &gt; <a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a>)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].g2cid != g2cid)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="comment">/* Free message resources. */</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    msg = <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].<a class="code" href="grib2__int_8h.html#ab6826be68665930ed928662d56c671e3">msg</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">while</span> (msg)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <a class="code" href="grib2__int_8h.html#structg2c__message__info">G2C_MESSAGE_INFO_T</a> *mtmp;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *sec;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="comment">/* Free section metadata. */</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        sec = msg-&gt;<a class="code" href="grib2__int_8h.html#a1dff2889177040680db6291b350c9d1c">sec</a>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">while</span> (sec)</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <a class="code" href="grib2__int_8h.html#structg2c__section__info">G2C_SECTION_INFO_T</a> *stmp;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            stmp = sec-&gt;<a class="code" href="grib2__int_8h.html#a1c00621e95d7abedb7b7d929cfb2f34a">next</a>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            <span class="keywordflow">if</span> (sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>)</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                free(sec-&gt;<a class="code" href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">template</a>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="comment">/* Free dim info in section 3. */</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            <span class="keywordflow">if</span> (sec-&gt;<a class="code" href="grib2__int_8h.html#a8c079c93f9e85a2c75bd3fb5060fd907">sec_num</a> == 3)</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((5, <span class="stringliteral">&quot;free_metadata freeing storage for lat/lon values&quot;</span>));</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <span class="keywordtype">float</span> *v0 = ((<a class="code" href="grib2__int_8h.html#structg2c__section3__info">G2C_SECTION3_INFO_T</a> *)(sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>))-&gt;dim[0].value;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="keywordtype">float</span> *v1 = ((<a class="code" href="grib2__int_8h.html#structg2c__section3__info">G2C_SECTION3_INFO_T</a> *)(sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>))-&gt;dim[1].value;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                <span class="keywordflow">if</span> (v0)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                    free(v0);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                <span class="keywordflow">if</span> (v1)</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                    free(v1);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <span class="keywordflow">if</span> (sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                free(sec-&gt;<a class="code" href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">sec_info</a>);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            free(sec);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            sec = stmp;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="comment">/* Free message. */</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        mtmp = msg-&gt;<a class="code" href="grib2__int_8h.html#af9828d4b2656003825bd4aa83dc14d26">next</a>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        free(msg);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        msg = mtmp;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="g2cfile_8c.html#a7761e7401213d226560fd1b379d33ba8"> 1357</a></span>&#160;<a class="code" href="g2cfile_8c.html#a7761e7401213d226560fd1b379d33ba8">g2c_close</a>(<span class="keywordtype">int</span> g2cid)</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;{</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">/* Check input. */</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">if</span> (g2cid &gt; <a class="code" href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a>)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">/* If using threading, lock the mutex. */</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="grib2__int_8h.html#af1b008061fe84eb508e6aef5b2e37f52">MUTEX_LOCK</a>(m);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].g2cid != g2cid)</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        ret = <a class="code" href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a>;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160; </div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a>((1, <span class="stringliteral">&quot;g2c_close %d&quot;</span>, g2cid));</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="comment">/* Free resources. */</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        ret = <a class="code" href="g2cfile_8c.html#ab86d8501a831d9b263548f1664dc661c">free_metadata</a>(g2cid);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="comment">/* Close the file. */</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">if</span> (fclose(<a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].f))</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            ret = <a class="code" href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a>;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="comment">/* Reset the file data. */</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].<a class="code" href="grib2__int_8h.html#a3101792b0b015bbb7860f85eb73bbd97">path</a>[0] = 0;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].<a class="code" href="grib2__int_8h.html#a6c2582f1e1d3c5e49df28497d9264fcd">g2cid</a> = 0;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].<a class="code" href="grib2__int_8h.html#a5bb4a632dcaa3398c4557cfe52a81e35">num_messages</a> = 0;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a>[g2cid].<a class="code" href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">f</a> = NULL;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="comment">/* If using threading, unlock the mutex. */</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="grib2__int_8h.html#a2e449246cf2d393ed6973729785e9e0c">MUTEX_UNLOCK</a>(m);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="ttc" id="adrstemplates_8c_html_aa9a9b32379db85395891b59213f08a5d"><div class="ttname"><a href="drstemplates_8c.html#aa9a9b32379db85395891b59213f08a5d">g2c_get_drs_template</a></div><div class="ttdeci">int g2c_get_drs_template(int drs_template_num, int *maplen, int *map, int *needext)</div><div class="ttdoc">Get DRS template information.</div><div class="ttdef"><b>Definition:</b> <a href="drstemplates_8c_source.html#l00261">drstemplates.c:261</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a216f2c45794641932725b7a8b1800423"><div class="ttname"><a href="g2cfile_8c.html#a216f2c45794641932725b7a8b1800423">g2c_open</a></div><div class="ttdeci">int g2c_open(const char *path, int mode, int *g2cid)</div><div class="ttdoc">Open an existing GRIB2 file.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l01193">g2cfile.c:1193</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="g2cfile_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdoc">Find a minimum.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00016">g2cfile.c:16</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a4245ea3fba0358165b402a7a615419bb"><div class="ttname"><a href="g2cfile_8c.html#a4245ea3fba0358165b402a7a615419bb">READ_BUF_SIZE</a></div><div class="ttdeci">#define READ_BUF_SIZE</div><div class="ttdoc">Default size of read-buffer.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00019">g2cfile.c:19</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a469752e68c9f6532ca2af09351146bf2"><div class="ttname"><a href="g2cfile_8c.html#a469752e68c9f6532ca2af09351146bf2">determine_dims</a></div><div class="ttdeci">static int determine_dims(G2C_SECTION_INFO_T *sec)</div><div class="ttdoc">Determine the dimension information from the section 3 metadata.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00418">g2cfile.c:418</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a51cfcbcc556e03f4347510eb7613344d"><div class="ttname"><a href="g2cfile_8c.html#a51cfcbcc556e03f4347510eb7613344d">MUTEX</a></div><div class="ttdeci">MUTEX(m)</div><div class="ttdoc">Define mutex for thread-safety.</div></div>
<div class="ttc" id="ag2cfile_8c_html_a666d5536f6359a1e357d5518413b6381"><div class="ttname"><a href="g2cfile_8c.html#a666d5536f6359a1e357d5518413b6381">read_msg_metadata</a></div><div class="ttdeci">static int read_msg_metadata(G2C_MESSAGE_INFO_T *msg)</div><div class="ttdoc">Read the file to get metadata about a message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00940">g2cfile.c:940</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a767dd5916869dc53f395903d613075cb"><div class="ttname"><a href="g2cfile_8c.html#a767dd5916869dc53f395903d613075cb">g2c_rw_section6_metadata</a></div><div class="ttdeci">int g2c_rw_section6_metadata(FILE *f, int rw_flag, G2C_SECTION_INFO_T *sec)</div><div class="ttdoc">Read or write the metadata from section 6 (Data Representation Section) of a GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00748">g2cfile.c:748</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a7761e7401213d226560fd1b379d33ba8"><div class="ttname"><a href="g2cfile_8c.html#a7761e7401213d226560fd1b379d33ba8">g2c_close</a></div><div class="ttdeci">int g2c_close(int g2cid)</div><div class="ttdoc">Close a GRIB2 file, freeing resources.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l01357">g2cfile.c:1357</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a87fb1062e1c14b9b21b83b2d87f1656d"><div class="ttname"><a href="g2cfile_8c.html#a87fb1062e1c14b9b21b83b2d87f1656d">g2c_file</a></div><div class="ttdeci">G2C_FILE_INFO_T g2c_file[G2C_MAX_FILES+1]</div><div class="ttdoc">Global file information.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00010">g2cfile.c:10</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a9474e2c676b3c163bcbd2b928fd509f3"><div class="ttname"><a href="g2cfile_8c.html#a9474e2c676b3c163bcbd2b928fd509f3">add_msg</a></div><div class="ttdeci">int add_msg(G2C_FILE_INFO_T *file, int msg_num, size_t bytes_to_msg, size_t bytes_in_msg, int read_file, G2C_MESSAGE_INFO_T **msg)</div><div class="ttdoc">Add new message to linked list.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l01020">g2cfile.c:1020</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a977358be2d226299f842cb298b779854"><div class="ttname"><a href="g2cfile_8c.html#a977358be2d226299f842cb298b779854">g2c_get_msg</a></div><div class="ttdeci">int g2c_get_msg(int g2cid, size_t skip_bytes, size_t max_bytes, size_t *bytes_to_msg, size_t *bytes_in_msg, unsigned char **cbuf)</div><div class="ttdoc">Search a file for the next GRIB1 or GRIB2 message, and read it, allocating space in memory to hold th...</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00293">g2cfile.c:293</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_a9b77b4fddeb0b4e4d136bb7c2460b7cc"><div class="ttname"><a href="g2cfile_8c.html#a9b77b4fddeb0b4e4d136bb7c2460b7cc">add_section</a></div><div class="ttdeci">int add_section(FILE *f, G2C_MESSAGE_INFO_T *msg, int sec_id, unsigned int sec_len, size_t bytes_to_sec, unsigned char sec_num)</div><div class="ttdoc">Add metadata about a new section 3, 4, 5, 6, or 7.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00797">g2cfile.c:797</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_aa13705298bc1de257ed922f999da7c1c"><div class="ttname"><a href="g2cfile_8c.html#aa13705298bc1de257ed922f999da7c1c">BYTES_TO_DISCIPLINE</a></div><div class="ttdeci">#define BYTES_TO_DISCIPLINE</div><div class="ttdoc">Number of bytes to discipline field in GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00022">g2cfile.c:22</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_ab4cbbee608ee075df75f19c67188aa9c"><div class="ttname"><a href="g2cfile_8c.html#ab4cbbee608ee075df75f19c67188aa9c">g2c_find_msg2</a></div><div class="ttdeci">int g2c_find_msg2(int g2cid, size_t skip_bytes, size_t max_bytes, size_t *bytes_to_msg, size_t *bytes_in_msg)</div><div class="ttdoc">Search a file for the next GRIB1 or GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00164">g2cfile.c:164</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_ab86d8501a831d9b263548f1664dc661c"><div class="ttname"><a href="g2cfile_8c.html#ab86d8501a831d9b263548f1664dc661c">free_metadata</a></div><div class="ttdeci">static int free_metadata(int g2cid)</div><div class="ttdoc">Free resources holding the file metadata.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l01294">g2cfile.c:1294</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_abd2e0851785661aee3f32380c9d8fdf0"><div class="ttname"><a href="g2cfile_8c.html#abd2e0851785661aee3f32380c9d8fdf0">g2c_rw_section5_metadata</a></div><div class="ttdeci">int g2c_rw_section5_metadata(FILE *f, int rw_flag, G2C_SECTION_INFO_T *sec)</div><div class="ttdoc">Read or write the metadata from section 5 (Data Representation Section) of a GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00666">g2cfile.c:666</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_acce12ea485669fe8604956b37b2126fb"><div class="ttname"><a href="g2cfile_8c.html#acce12ea485669fe8604956b37b2126fb">read_metadata</a></div><div class="ttdeci">static int read_metadata(int g2cid)</div><div class="ttdoc">Read metadata from a GRIB2 file being opened with g2c_open().</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l01082">g2cfile.c:1082</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_ae7843e51976900337654503388d9a726"><div class="ttname"><a href="g2cfile_8c.html#ae7843e51976900337654503388d9a726">g2c_rw_section1_metadata</a></div><div class="ttdeci">int g2c_rw_section1_metadata(FILE *f, int rw_flag, G2C_MESSAGE_INFO_T *msg)</div><div class="ttdoc">Read Section 1.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00877">g2cfile.c:877</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_af12335d519df51c7331a8c4f343fb98a"><div class="ttname"><a href="g2cfile_8c.html#af12335d519df51c7331a8c4f343fb98a">g2c_add_file</a></div><div class="ttdeci">int g2c_add_file(const char *path, int mode, int *g2cid)</div><div class="ttdoc">Open a GRIB2 file and add it to the list of open files.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l01146">g2cfile.c:1146</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_af251e6786990405633095ab288f06a06"><div class="ttname"><a href="g2cfile_8c.html#af251e6786990405633095ab288f06a06">find_available_g2cid</a></div><div class="ttdeci">static int find_available_g2cid(int *g2cid)</div><div class="ttdoc">Find a g2cid to use for a newly opened or created file.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00365">g2cfile.c:365</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_af50a08963916901ddae4e32a81fec8f5"><div class="ttname"><a href="g2cfile_8c.html#af50a08963916901ddae4e32a81fec8f5">g2c_seekmsg</a></div><div class="ttdeci">int g2c_seekmsg(int g2cid, size_t skip, size_t *offset, size_t *msglen)</div><div class="ttdoc">Search a file for the next GRIB2 Message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00056">g2cfile.c:56</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_af7f2e7b1cc0d81f73f972feaa4fc65c0"><div class="ttname"><a href="g2cfile_8c.html#af7f2e7b1cc0d81f73f972feaa4fc65c0">g2c_rw_section3_metadata</a></div><div class="ttdeci">int g2c_rw_section3_metadata(FILE *f, int rw_flag, G2C_SECTION_INFO_T *sec)</div><div class="ttdoc">Read the metadata from section 3 (Grid Definition Section) of a GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00481">g2cfile.c:481</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_af7fef1bd5fae59a765ccfa3493c20699"><div class="ttname"><a href="g2cfile_8c.html#af7fef1bd5fae59a765ccfa3493c20699">g2c_rw_section4_metadata</a></div><div class="ttdeci">int g2c_rw_section4_metadata(FILE *f, int rw_flag, G2C_SECTION_INFO_T *sec)</div><div class="ttdoc">Read or write the metadata from section 4 (Product Definition Section) of a GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00577">g2cfile.c:577</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_afa9f4de2d5c14d0e8d26ae7f502b0267"><div class="ttname"><a href="g2cfile_8c.html#afa9f4de2d5c14d0e8d26ae7f502b0267">G2C_SEEKMSG_BUFSIZE</a></div><div class="ttdeci">#define G2C_SEEKMSG_BUFSIZE</div><div class="ttdoc">Size of buffer used in g2c_seekmsg().</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00027">g2cfile.c:27</a></div></div>
<div class="ttc" id="ag2cfile_8c_html_afd7e03b89e0711bca4a47eb59926a4c4"><div class="ttname"><a href="g2cfile_8c.html#afd7e03b89e0711bca4a47eb59926a4c4">g2c_next_g2cid</a></div><div class="ttdeci">int g2c_next_g2cid</div><div class="ttdoc">Next g2cid file ID - used when opening or creating a file.</div><div class="ttdef"><b>Definition:</b> <a href="g2cfile_8c_source.html#l00013">g2cfile.c:13</a></div></div>
<div class="ttc" id="ag2cio_8c_html_a0efe5cf31d683e3e6aa3144c82ab2a17"><div class="ttname"><a href="g2cio_8c.html#a0efe5cf31d683e3e6aa3144c82ab2a17">g2c_file_io_ushort</a></div><div class="ttdeci">int g2c_file_io_ushort(FILE *f, int write, unsigned short *var)</div><div class="ttdoc">Read or write a big-endian unsigned short to an open GRIB2 file, with conversion between native and b...</div><div class="ttdef"><b>Definition:</b> <a href="g2cio_8c_source.html#l00294">g2cio.c:294</a></div></div>
<div class="ttc" id="ag2cio_8c_html_a2cb1faaeaddca5c428124e2611c9c58c"><div class="ttname"><a href="g2cio_8c.html#a2cb1faaeaddca5c428124e2611c9c58c">g2c_file_io_template</a></div><div class="ttdeci">int g2c_file_io_template(FILE *f, int rw_flag, int map, long long int *template_value)</div><div class="ttdoc">Read or write a big-endian 4-byte int or unsigned int from or to an open file, with conversion betwee...</div><div class="ttdef"><b>Definition:</b> <a href="g2cio_8c_source.html#l00408">g2cio.c:408</a></div></div>
<div class="ttc" id="ag2cio_8c_html_a938ee5c56d3896e1bfb6682eeac6d6c2"><div class="ttname"><a href="g2cio_8c.html#a938ee5c56d3896e1bfb6682eeac6d6c2">g2c_file_io_short</a></div><div class="ttdeci">int g2c_file_io_short(FILE *f, int write, short *var)</div><div class="ttdoc">Read or write a big-endian signed short to an open GRIB2 file, with conversion between native and big...</div><div class="ttdef"><b>Definition:</b> <a href="g2cio_8c_source.html#l00273">g2cio.c:273</a></div></div>
<div class="ttc" id="ag2cio_8c_html_ae839ef9885e9d311f34429e9d8c4e429"><div class="ttname"><a href="g2cio_8c.html#ae839ef9885e9d311f34429e9d8c4e429">g2c_file_io_ubyte</a></div><div class="ttdeci">int g2c_file_io_ubyte(FILE *f, int write, unsigned char *var)</div><div class="ttdoc">Read or write a big-endian unsigned byte to an open GRIB2 file, with conversion between native and bi...</div><div class="ttdef"><b>Definition:</b> <a href="g2cio_8c_source.html#l00337">g2cio.c:337</a></div></div>
<div class="ttc" id="ag2cio_8c_html_af13561bb1b69477285058c02d2f053b2"><div class="ttname"><a href="g2cio_8c.html#af13561bb1b69477285058c02d2f053b2">g2c_file_io_uint</a></div><div class="ttdeci">int g2c_file_io_uint(FILE *f, int write, unsigned int *var)</div><div class="ttdoc">Read or write a big-endian 4-byte unsigned int to an open GRIB2 file, with conversion between native ...</div><div class="ttdef"><b>Definition:</b> <a href="g2cio_8c_source.html#l00251">g2cio.c:251</a></div></div>
<div class="ttc" id="ag2cutil_8c_html_acec6023ac37dbab9ac55c62a0ac14624"><div class="ttname"><a href="g2cutil_8c.html#acec6023ac37dbab9ac55c62a0ac14624">g2c_log_file</a></div><div class="ttdeci">int g2c_log_file(int g2cid)</div><div class="ttdoc">Print a summary of the contents of an open GRIB2 file.</div><div class="ttdef"><b>Definition:</b> <a href="g2cutil_8c_source.html#l00188">g2cutil.c:188</a></div></div>
<div class="ttc" id="agrib2_8h_html_a024050c81e4981bea2cb67c27e8a8072"><div class="ttname"><a href="grib2_8h.html#a024050c81e4981bea2cb67c27e8a8072">G2C_EMSG</a></div><div class="ttdeci">#define G2C_EMSG</div><div class="ttdoc">Error decoding GRIB message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00501">grib2.h:501</a></div></div>
<div class="ttc" id="agrib2_8h_html_a030fe94d956425ce9723e231c7cd652e"><div class="ttname"><a href="grib2_8h.html#a030fe94d956425ce9723e231c7cd652e">G2C_MAX_FILES</a></div><div class="ttdeci">#define G2C_MAX_FILES</div><div class="ttdoc">Maximum number of open files.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00289">grib2.h:289</a></div></div>
<div class="ttc" id="agrib2_8h_html_a0f60a9a7769c124118754c22926b5ddf"><div class="ttname"><a href="grib2_8h.html#a0f60a9a7769c124118754c22926b5ddf">G2C_NOCLOBBER</a></div><div class="ttdeci">#define G2C_NOCLOBBER</div><div class="ttdoc">Don't destroy existing file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00294">grib2.h:294</a></div></div>
<div class="ttc" id="agrib2_8h_html_a2a68c6a57c0aec69ab864843b3727a78"><div class="ttname"><a href="grib2_8h.html#a2a68c6a57c0aec69ab864843b3727a78">G2C_ENOMSG</a></div><div class="ttdeci">#define G2C_ENOMSG</div><div class="ttdoc">No GRIB message found.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00502">grib2.h:502</a></div></div>
<div class="ttc" id="agrib2_8h_html_a39bad0ee21628d9381fe409ec98214f1"><div class="ttname"><a href="grib2_8h.html#a39bad0ee21628d9381fe409ec98214f1">G2C_ENAMETOOLONG</a></div><div class="ttdeci">#define G2C_ENAMETOOLONG</div><div class="ttdoc">Name too long.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00495">grib2.h:495</a></div></div>
<div class="ttc" id="agrib2_8h_html_a43712608ab00578dafcf3c39cff9582d"><div class="ttname"><a href="grib2_8h.html#a43712608ab00578dafcf3c39cff9582d">G2C_WRITE</a></div><div class="ttdeci">#define G2C_WRITE</div><div class="ttdoc">Set read-write access for g2c_open().</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00292">grib2.h:292</a></div></div>
<div class="ttc" id="agrib2_8h_html_a4dcc89afa62b38a9a0d7a4df8d9f8ca7"><div class="ttname"><a href="grib2_8h.html#a4dcc89afa62b38a9a0d7a4df8d9f8ca7">G2C_ENOSECTION</a></div><div class="ttdeci">#define G2C_ENOSECTION</div><div class="ttdoc">Cannot find section.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00506">grib2.h:506</a></div></div>
<div class="ttc" id="agrib2_8h_html_a597395069e35e29288bd0f57081a0c65"><div class="ttname"><a href="grib2_8h.html#a597395069e35e29288bd0f57081a0c65">G2C_EFILE</a></div><div class="ttdeci">#define G2C_EFILE</div><div class="ttdoc">File I/O error.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00497">grib2.h:497</a></div></div>
<div class="ttc" id="agrib2_8h_html_a6d73cbbc6177df2e5bc844798d8f2d2b"><div class="ttname"><a href="grib2_8h.html#a6d73cbbc6177df2e5bc844798d8f2d2b">G2C_MAX_GDS_TEMPLATE_MAPLEN</a></div><div class="ttdeci">#define G2C_MAX_GDS_TEMPLATE_MAPLEN</div><div class="ttdoc">Maximum grid template map length.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00308">grib2.h:308</a></div></div>
<div class="ttc" id="agrib2_8h_html_a6f87ce641388b1464e2287fd3814993f"><div class="ttname"><a href="grib2_8h.html#a6f87ce641388b1464e2287fd3814993f">G2C_ENOMEM</a></div><div class="ttdeci">#define G2C_ENOMEM</div><div class="ttdoc">Out of memory.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00500">grib2.h:500</a></div></div>
<div class="ttc" id="agrib2_8h_html_a898aa73781e9952c3e56ed3282a873f4"><div class="ttname"><a href="grib2_8h.html#a898aa73781e9952c3e56ed3282a873f4">G2C_ERROR</a></div><div class="ttdeci">#define G2C_ERROR</div><div class="ttdoc">General error code, returned for some test errors.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00492">grib2.h:492</a></div></div>
<div class="ttc" id="agrib2_8h_html_a91778844b25133a0b77e345a8e1bccf8"><div class="ttname"><a href="grib2_8h.html#a91778844b25133a0b77e345a8e1bccf8">G2C_MAX_NAME</a></div><div class="ttdeci">#define G2C_MAX_NAME</div><div class="ttdoc">Maximum length of a name.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00290">grib2.h:290</a></div></div>
<div class="ttc" id="agrib2_8h_html_a9abb07853bd272b8f33bb978bb805cb9"><div class="ttname"><a href="grib2_8h.html#a9abb07853bd272b8f33bb978bb805cb9">G2C_EINVAL</a></div><div class="ttdeci">#define G2C_EINVAL</div><div class="ttdoc">Invalid input.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00496">grib2.h:496</a></div></div>
<div class="ttc" id="agrib2_8h_html_aa9eaa709aa71a9f4b164b979b9467ce1"><div class="ttname"><a href="grib2_8h.html#aa9eaa709aa71a9f4b164b979b9467ce1">G2C_ETOOMANYFILES</a></div><div class="ttdeci">#define G2C_ETOOMANYFILES</div><div class="ttdoc">Trying to open too many files.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00499">grib2.h:499</a></div></div>
<div class="ttc" id="agrib2_8h_html_aad36614cfd2153c4494969a2f5c3b9ed"><div class="ttname"><a href="grib2_8h.html#aad36614cfd2153c4494969a2f5c3b9ed">G2C_EBADSECTION</a></div><div class="ttdeci">#define G2C_EBADSECTION</div><div class="ttdoc">Invalid section number.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00509">grib2.h:509</a></div></div>
<div class="ttc" id="agrib2_8h_html_ac46d9ca4e9715c77dd63ee6a3a3ecab5"><div class="ttname"><a href="grib2_8h.html#ac46d9ca4e9715c77dd63ee6a3a3ecab5">G2C_MAX_PDS_TEMPLATE_MAPLEN</a></div><div class="ttdeci">#define G2C_MAX_PDS_TEMPLATE_MAPLEN</div><div class="ttdoc">Maximum template map length.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00310">grib2.h:310</a></div></div>
<div class="ttc" id="agrib2_8h_html_af04bb40930441ec99376ed72bf18684e"><div class="ttname"><a href="grib2_8h.html#af04bb40930441ec99376ed72bf18684e">G2C_SECTION0_BYTES</a></div><div class="ttdeci">#define G2C_SECTION0_BYTES</div><div class="ttdoc">Number of bytes in section 0.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00297">grib2.h:297</a></div></div>
<div class="ttc" id="agrib2_8h_html_af0b63b0e0f41f07f562a4367e2a60838"><div class="ttname"><a href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a></div><div class="ttdeci">int64_t g2int</div><div class="ttdoc">Long integer type.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00033">grib2.h:33</a></div></div>
<div class="ttc" id="agrib2_8h_html_af32c4bff1609a6286dbd77dd2fa0b624"><div class="ttname"><a href="grib2_8h.html#af32c4bff1609a6286dbd77dd2fa0b624">G2C_EBADID</a></div><div class="ttdeci">#define G2C_EBADID</div><div class="ttdoc">Bad ID.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00498">grib2.h:498</a></div></div>
<div class="ttc" id="agrib2_8h_html_af837ca43cf1f95ac2d4096d3c3e35576"><div class="ttname"><a href="grib2_8h.html#af837ca43cf1f95ac2d4096d3c3e35576">G2C_NOERROR</a></div><div class="ttdeci">#define G2C_NOERROR</div><div class="ttdoc">No error.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00491">grib2.h:491</a></div></div>
<div class="ttc" id="agrib2_8h_html_afd42b8eddf696ef63f54a6265ebc69f9"><div class="ttname"><a href="grib2_8h.html#afd42b8eddf696ef63f54a6265ebc69f9">G2C_SECTION1_BYTES</a></div><div class="ttdeci">#define G2C_SECTION1_BYTES</div><div class="ttdoc">Number of bytes in section 1 (not including reserved, optional data at the end of the section).</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00301">grib2.h:301</a></div></div>
<div class="ttc" id="agrib2__int_8h_html"><div class="ttname"><a href="grib2__int_8h.html">grib2_int.h</a></div><div class="ttdoc">Header file with internal function prototypes NCEPLIBS-g2c library.</div></div>
<div class="ttc" id="agrib2__int_8h_html_a03dbc85724fca79a8a073e2101fdb64d"><div class="ttname"><a href="grib2__int_8h.html#a03dbc85724fca79a8a073e2101fdb64d">G2C_FILE_READ</a></div><div class="ttdeci">#define G2C_FILE_READ</div><div class="ttdoc">Read.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00129">grib2_int.h:129</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a1c00621e95d7abedb7b7d929cfb2f34a"><div class="ttname"><a href="grib2__int_8h.html#a1c00621e95d7abedb7b7d929cfb2f34a">g2c_section_info::next</a></div><div class="ttdeci">struct g2c_section_info * next</div><div class="ttdoc">Pointer to next in list.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00176">grib2_int.h:176</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a1dff2889177040680db6291b350c9d1c"><div class="ttname"><a href="grib2__int_8h.html#a1dff2889177040680db6291b350c9d1c">g2c_message_info::sec</a></div><div class="ttdeci">struct g2c_section_info * sec</div><div class="ttdoc">List of section metadata.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00162">grib2_int.h:162</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a1ff7f8239d6d580d53d1857b05842eda"><div class="ttname"><a href="grib2__int_8h.html#a1ff7f8239d6d580d53d1857b05842eda">g2c_dim_info::len</a></div><div class="ttdeci">size_t len</div><div class="ttdoc">Length of dimension.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00186">grib2_int.h:186</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a21a8c63eb7714bf474d25a32017b127f"><div class="ttname"><a href="grib2__int_8h.html#a21a8c63eb7714bf474d25a32017b127f">g2c_message_info::subcenter</a></div><div class="ttdeci">short subcenter</div><div class="ttdoc">Originating subcenter.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00150">grib2_int.h:150</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a2320bf6fe88358a510c67d695395d94d"><div class="ttname"><a href="grib2__int_8h.html#a2320bf6fe88358a510c67d695395d94d">g2c_section_info::sec_id</a></div><div class="ttdeci">int sec_id</div><div class="ttdoc">ID of the section (0-based).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00170">grib2_int.h:170</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a240eb2cfb06a088831f356621ffbd629"><div class="ttname"><a href="grib2__int_8h.html#a240eb2cfb06a088831f356621ffbd629">G2C_MAGIC_HEADER_LEN</a></div><div class="ttdeci">#define G2C_MAGIC_HEADER_LEN</div><div class="ttdoc">Full length of magic header string (includes GRIB version byte).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00042">grib2_int.h:42</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a242577f5fe354b2dd763690ba085ec4c"><div class="ttname"><a href="grib2__int_8h.html#a242577f5fe354b2dd763690ba085ec4c">g2c_section3_info::dim</a></div><div class="ttdeci">G2C_DIM_INFO_T dim[2]</div><div class="ttdoc">Dimension information.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00201">grib2_int.h:201</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a269f23c98537183178c3ebc9f6d915fd"><div class="ttname"><a href="grib2__int_8h.html#a269f23c98537183178c3ebc9f6d915fd">g2c_message_info::master_version</a></div><div class="ttdeci">unsigned char master_version</div><div class="ttdoc">GRIB master tables version number.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00151">grib2_int.h:151</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a2d4f4340b41c07ec8fc52ff19aa23ec4"><div class="ttname"><a href="grib2__int_8h.html#a2d4f4340b41c07ec8fc52ff19aa23ec4">FOUR_BYTES</a></div><div class="ttdeci">#define FOUR_BYTES</div><div class="ttdoc">Four bytes.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00052">grib2_int.h:52</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a2e449246cf2d393ed6973729785e9e0c"><div class="ttname"><a href="grib2__int_8h.html#a2e449246cf2d393ed6973729785e9e0c">MUTEX_UNLOCK</a></div><div class="ttdeci">#define MUTEX_UNLOCK(m)</div><div class="ttdoc">Pthreads not enabled, so do nothing.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00117">grib2_int.h:117</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a3101792b0b015bbb7860f85eb73bbd97"><div class="ttname"><a href="grib2__int_8h.html#a3101792b0b015bbb7860f85eb73bbd97">g2c_file_info::path</a></div><div class="ttdeci">char path[G2C_MAX_NAME+1]</div><div class="ttdoc">Path of the file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00238">grib2_int.h:238</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a4632cb054d0f24d1f39f7e174bc40e28"><div class="ttname"><a href="grib2__int_8h.html#a4632cb054d0f24d1f39f7e174bc40e28">g2c_message_info::type</a></div><div class="ttdeci">unsigned char type</div><div class="ttdoc">Type of processed data in this GRIB message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00161">grib2_int.h:161</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a49ce0f513e7723400907f777946fc6c4"><div class="ttname"><a href="grib2__int_8h.html#a49ce0f513e7723400907f777946fc6c4">g2c_section3_info::grid_def</a></div><div class="ttdeci">unsigned short grid_def</div><div class="ttdoc">Grid definition template number (= N) (See Table 3.1).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00199">grib2_int.h:199</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a4bca22c62bed41329e62bea27ee745b3"><div class="ttname"><a href="grib2__int_8h.html#a4bca22c62bed41329e62bea27ee745b3">g2c_message_info::hour</a></div><div class="ttdeci">unsigned char hour</div><div class="ttdoc">Hour.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00157">grib2_int.h:157</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a509882196b78bdf75ee36d1d1bf0cc35"><div class="ttname"><a href="grib2__int_8h.html#a509882196b78bdf75ee36d1d1bf0cc35">G2C_MAGIC_HEADER</a></div><div class="ttdeci">#define G2C_MAGIC_HEADER</div><div class="ttdoc">GRIB magic header string.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00039">grib2_int.h:39</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a5815202ac6ed7cb3e380093dd6602262"><div class="ttname"><a href="grib2__int_8h.html#a5815202ac6ed7cb3e380093dd6602262">g2c_message_info::minute</a></div><div class="ttdeci">unsigned char minute</div><div class="ttdoc">Minute.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00158">grib2_int.h:158</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a5916fc7041e507c7cfc797ef73699471"><div class="ttname"><a href="grib2__int_8h.html#a5916fc7041e507c7cfc797ef73699471">g2c_section3_info::num_data_points</a></div><div class="ttdeci">unsigned int num_data_points</div><div class="ttdoc">Number of data points.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00196">grib2_int.h:196</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a5bb4a632dcaa3398c4557cfe52a81e35"><div class="ttname"><a href="grib2__int_8h.html#a5bb4a632dcaa3398c4557cfe52a81e35">g2c_file_info::num_messages</a></div><div class="ttdeci">size_t num_messages</div><div class="ttdoc">Number of messages in the file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00240">grib2_int.h:240</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a5c5c17ef34f6f6401cf4ebd9a3fbf9b0"><div class="ttname"><a href="grib2__int_8h.html#a5c5c17ef34f6f6401cf4ebd9a3fbf9b0">g2c_section4_info::num_coord</a></div><div class="ttdeci">unsigned short num_coord</div><div class="ttdoc">Number of coordinate values after template.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00209">grib2_int.h:209</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a6239752e3aa457d9dce277385ca3e75b"><div class="ttname"><a href="grib2__int_8h.html#a6239752e3aa457d9dce277385ca3e75b">g2c_message_info::num_local</a></div><div class="ttdeci">int num_local</div><div class="ttdoc">Number of local sections in the message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00141">grib2_int.h:141</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a626f386b445c0d2910d680559621c194"><div class="ttname"><a href="grib2__int_8h.html#a626f386b445c0d2910d680559621c194">g2c_message_info::sig_ref_time</a></div><div class="ttdeci">unsigned char sig_ref_time</div><div class="ttdoc">Significance of reference time.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00153">grib2_int.h:153</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a63205f1ad14afc714149004a931abbce"><div class="ttname"><a href="grib2__int_8h.html#a63205f1ad14afc714149004a931abbce">LATITUDE</a></div><div class="ttdeci">#define LATITUDE</div><div class="ttdoc">Latitude.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00056">grib2_int.h:56</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a646e4d619d5326e4168cfd9ea8890c01"><div class="ttname"><a href="grib2__int_8h.html#a646e4d619d5326e4168cfd9ea8890c01">g2c_section3_info::num_opt</a></div><div class="ttdeci">unsigned char num_opt</div><div class="ttdoc">Number of octets for optional list of numbers defining number of points.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00197">grib2_int.h:197</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a6ae662fc009939e70b82141e1671a0bb"><div class="ttname"><a href="grib2__int_8h.html#a6ae662fc009939e70b82141e1671a0bb">g2c_message_info::discipline</a></div><div class="ttdeci">unsigned char discipline</div><div class="ttdoc">Discipline from section 0.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00138">grib2_int.h:138</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a6c2582f1e1d3c5e49df28497d9264fcd"><div class="ttname"><a href="grib2__int_8h.html#a6c2582f1e1d3c5e49df28497d9264fcd">g2c_file_info::g2cid</a></div><div class="ttdeci">int g2cid</div><div class="ttdoc">ID of the file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00237">grib2_int.h:237</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a72cb1219a1d21a7261b3ff4f6e6ea1c1"><div class="ttname"><a href="grib2__int_8h.html#a72cb1219a1d21a7261b3ff4f6e6ea1c1">g2c_dim_info::name</a></div><div class="ttdeci">char name[G2C_MAX_NAME+1]</div><div class="ttdoc">Name of dimension.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00187">grib2_int.h:187</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a761fd11af0a8e1d3b9eb147edb653b0b"><div class="ttname"><a href="grib2__int_8h.html#a761fd11af0a8e1d3b9eb147edb653b0b">g2c_section3_info::interp_list</a></div><div class="ttdeci">unsigned char interp_list</div><div class="ttdoc">Interpetation of list of numbers defining number of points (See Table 3.11).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00198">grib2_int.h:198</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a7eccf6cd6fa0f202a1c71c5af338d227"><div class="ttname"><a href="grib2__int_8h.html#a7eccf6cd6fa0f202a1c71c5af338d227">g2c_message_info::bytes_in_msg</a></div><div class="ttdeci">size_t bytes_in_msg</div><div class="ttdoc">Number of bytes in this message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00137">grib2_int.h:137</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a7f81c8fcd129ef70ad65140d6161668a"><div class="ttname"><a href="grib2__int_8h.html#a7f81c8fcd129ef70ad65140d6161668a">g2c_section_info::prev</a></div><div class="ttdeci">struct g2c_section_info * prev</div><div class="ttdoc">Pointer to previous in list.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00177">grib2_int.h:177</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a85954382df1adfd1066de85f7d790ad7"><div class="ttname"><a href="grib2__int_8h.html#a85954382df1adfd1066de85f7d790ad7">g2c_message_info::num_fields</a></div><div class="ttdeci">int num_fields</div><div class="ttdoc">Number of fields in the message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00140">grib2_int.h:140</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a8c079c93f9e85a2c75bd3fb5060fd907"><div class="ttname"><a href="grib2__int_8h.html#a8c079c93f9e85a2c75bd3fb5060fd907">g2c_section_info::sec_num</a></div><div class="ttdeci">unsigned char sec_num</div><div class="ttdoc">Section number.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00173">grib2_int.h:173</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a8da09513416a4bd9ba4cfa1b291c0c85"><div class="ttname"><a href="grib2__int_8h.html#a8da09513416a4bd9ba4cfa1b291c0c85">G2C_MIN_MAX_BYTES</a></div><div class="ttdeci">#define G2C_MIN_MAX_BYTES</div><div class="ttdoc">Minimum acceptable value for max_bytes parameter of g2c_get_msg().</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00036">grib2_int.h:36</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a901fe0745e77a8f83cc94e45343c2128"><div class="ttname"><a href="grib2__int_8h.html#a901fe0745e77a8f83cc94e45343c2128">g2c_section5_info::num_data_points</a></div><div class="ttdeci">unsigned int num_data_points</div><div class="ttdoc">Number of data points where one or more values are specified in Section 7 when a bit map is present,...</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00221">grib2_int.h:221</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a9736c199befb7d6cdc3cc771d5e5fd9c"><div class="ttname"><a href="grib2__int_8h.html#a9736c199befb7d6cdc3cc771d5e5fd9c">g2c_section_info::sec_info</a></div><div class="ttdeci">void * sec_info</div><div class="ttdoc">Pointer to struct specific for section 3, 4, 5, 6, or 7.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00175">grib2_int.h:175</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a9795d38c518857794dee05363ea27997"><div class="ttname"><a href="grib2__int_8h.html#a9795d38c518857794dee05363ea27997">g2c_dim_info::value</a></div><div class="ttdeci">float * value</div><div class="ttdoc">Array of dimension values.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00188">grib2_int.h:188</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a9974cef2b24b092ce879c1f65c6ed88c"><div class="ttname"><a href="grib2__int_8h.html#a9974cef2b24b092ce879c1f65c6ed88c">g2c_section6_info::indicator</a></div><div class="ttdeci">unsigned char indicator</div><div class="ttdoc">Bit map indicator.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00231">grib2_int.h:231</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_a9adc2635c9c81b265f32cbce68b1b474"><div class="ttname"><a href="grib2__int_8h.html#a9adc2635c9c81b265f32cbce68b1b474">g2c_section_info::sec_len</a></div><div class="ttdeci">unsigned int sec_len</div><div class="ttdoc">Length of the section (in bytes).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00171">grib2_int.h:171</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_aa656185846e3574abd79f57b1ee3d899"><div class="ttname"><a href="grib2__int_8h.html#aa656185846e3574abd79f57b1ee3d899">g2c_message_info::year</a></div><div class="ttdeci">short year</div><div class="ttdoc">Year.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00154">grib2_int.h:154</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_aab2569498daaf959c3836f15ee38276d"><div class="ttname"><a href="grib2__int_8h.html#aab2569498daaf959c3836f15ee38276d">g2c_section_info::bytes_to_sec</a></div><div class="ttdeci">size_t bytes_to_sec</div><div class="ttdoc">Number of bytes from start of message to this section.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00172">grib2_int.h:172</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_aab42481c672ffe6236cda6027d174a61"><div class="ttname"><a href="grib2__int_8h.html#aab42481c672ffe6236cda6027d174a61">g2c_message_info::status</a></div><div class="ttdeci">unsigned char status</div><div class="ttdoc">Production Status of Processed data in the GRIB message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00160">grib2_int.h:160</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ab04a12985543a4277feae611d62718bf"><div class="ttname"><a href="grib2__int_8h.html#ab04a12985543a4277feae611d62718bf">LONGITUDE</a></div><div class="ttdeci">#define LONGITUDE</div><div class="ttdoc">Longitude.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00059">grib2_int.h:59</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ab6826be68665930ed928662d56c671e3"><div class="ttname"><a href="grib2__int_8h.html#ab6826be68665930ed928662d56c671e3">g2c_file_info::msg</a></div><div class="ttdeci">G2C_MESSAGE_INFO_T * msg</div><div class="ttdoc">Information about each message in the file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00241">grib2_int.h:241</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ab6ab60c8c7e1f9fa0d00ea25b917a7e1"><div class="ttname"><a href="grib2__int_8h.html#ab6ab60c8c7e1f9fa0d00ea25b917a7e1">ONE_BYTE</a></div><div class="ttdeci">#define ONE_BYTE</div><div class="ttdoc">One byte.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00050">grib2_int.h:50</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_abb35b3e9ac2b0ff8cd7c0881988940c0"><div class="ttname"><a href="grib2__int_8h.html#abb35b3e9ac2b0ff8cd7c0881988940c0">LOG</a></div><div class="ttdeci">#define LOG(e)</div><div class="ttdoc">Ignore logging to stdout.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00426">grib2_int.h:426</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_abc902f5b888b64b5004b189d25550c99"><div class="ttname"><a href="grib2__int_8h.html#abc902f5b888b64b5004b189d25550c99">g2c_message_info::second</a></div><div class="ttdeci">unsigned char second</div><div class="ttdoc">Second.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00159">grib2_int.h:159</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_abecb87ff997d6d0f929ba1a770f0621b"><div class="ttname"><a href="grib2__int_8h.html#abecb87ff997d6d0f929ba1a770f0621b">g2c_message_info::day</a></div><div class="ttdeci">unsigned char day</div><div class="ttdoc">Day.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00156">grib2_int.h:156</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ac1966f1beac4c32fd406abb7272108f5"><div class="ttname"><a href="grib2__int_8h.html#ac1966f1beac4c32fd406abb7272108f5">g2c_file_info::f</a></div><div class="ttdeci">FILE * f</div><div class="ttdoc">FILE pointer to open file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00239">grib2_int.h:239</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ac5089b3aa084e111dcf76fe148d4cadc"><div class="ttname"><a href="grib2__int_8h.html#ac5089b3aa084e111dcf76fe148d4cadc">g2c_section3_info::source_grid_def</a></div><div class="ttdeci">unsigned char source_grid_def</div><div class="ttdoc">Source of grid definition (See Table 3.0).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00195">grib2_int.h:195</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ac5827e102f2aaacc0abcbc5a5aafb678"><div class="ttname"><a href="grib2__int_8h.html#ac5827e102f2aaacc0abcbc5a5aafb678">g2c_section_info::template_len</a></div><div class="ttdeci">int template_len</div><div class="ttdoc">Number of entries in template.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00179">grib2_int.h:179</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_acaf5f4deaef680af27ba1b626a4a7acc"><div class="ttname"><a href="grib2__int_8h.html#acaf5f4deaef680af27ba1b626a4a7acc">g2c_message_info::local_version</a></div><div class="ttdeci">unsigned char local_version</div><div class="ttdoc">Version number of GRIB local tables used to augment Master Tables.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00152">grib2_int.h:152</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ad4e90614132aeb5308bffc79b342c519"><div class="ttname"><a href="grib2__int_8h.html#ad4e90614132aeb5308bffc79b342c519">hton64</a></div><div class="ttdeci">#define hton64(y)</div><div class="ttdoc">Byte swap 64-bit ints.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00127">grib2_int.h:127</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_adcef6b4e7c590e2a2fc37308d1c7d96a"><div class="ttname"><a href="grib2__int_8h.html#adcef6b4e7c590e2a2fc37308d1c7d96a">g2c_message_info::month</a></div><div class="ttdeci">unsigned char month</div><div class="ttdoc">Month.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00155">grib2_int.h:155</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_ae400e26b01043c449c39de9cf6629c88"><div class="ttname"><a href="grib2__int_8h.html#ae400e26b01043c449c39de9cf6629c88">g2c_message_info::msg_num</a></div><div class="ttdeci">size_t msg_num</div><div class="ttdoc">Number of message in file (0-based).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00135">grib2_int.h:135</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_aeb41d96ee4ff703298807472e6d73ba5"><div class="ttname"><a href="grib2__int_8h.html#aeb41d96ee4ff703298807472e6d73ba5">g2c_section5_info::data_def</a></div><div class="ttdeci">unsigned short data_def</div><div class="ttdoc">Data representation template number (See Table 5.0).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00222">grib2_int.h:222</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_af149feb9c6a24df42c987bbadb5d2c18"><div class="ttname"><a href="grib2__int_8h.html#af149feb9c6a24df42c987bbadb5d2c18">g2c_message_info::bytes_to_msg</a></div><div class="ttdeci">size_t bytes_to_msg</div><div class="ttdoc">Number of bytes to skip in the file, to get to this message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00136">grib2_int.h:136</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_af1b008061fe84eb508e6aef5b2e37f52"><div class="ttname"><a href="grib2__int_8h.html#af1b008061fe84eb508e6aef5b2e37f52">MUTEX_LOCK</a></div><div class="ttdeci">#define MUTEX_LOCK(m)</div><div class="ttdoc">Pthreads not enabled, so do nothing.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00114">grib2_int.h:114</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_af280c0c0846f17808aae9772a42edc19"><div class="ttname"><a href="grib2__int_8h.html#af280c0c0846f17808aae9772a42edc19">g2c_section_info::template</a></div><div class="ttdeci">long long int * template</div><div class="ttdoc">Grid, product, or data template.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00178">grib2_int.h:178</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_af33ecc99c8b4f4240c69a380b73774f4"><div class="ttname"><a href="grib2__int_8h.html#af33ecc99c8b4f4240c69a380b73774f4">g2c_message_info::sec1_len</a></div><div class="ttdeci">int sec1_len</div><div class="ttdoc">Length of section 1.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00148">grib2_int.h:148</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_af9828d4b2656003825bd4aa83dc14d26"><div class="ttname"><a href="grib2__int_8h.html#af9828d4b2656003825bd4aa83dc14d26">g2c_message_info::next</a></div><div class="ttdeci">struct g2c_message_info * next</div><div class="ttdoc">Pointer to next in list.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00164">grib2_int.h:164</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_afa38d80d5790033707db560070c8b0a3"><div class="ttname"><a href="grib2__int_8h.html#afa38d80d5790033707db560070c8b0a3">g2c_section_info::msg</a></div><div class="ttdeci">G2C_MESSAGE_INFO_T * msg</div><div class="ttdoc">Pointer to contianing message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00174">grib2_int.h:174</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_afca06e92d8dcf3c8f1172f3414ab870a"><div class="ttname"><a href="grib2__int_8h.html#afca06e92d8dcf3c8f1172f3414ab870a">g2c_message_info::center</a></div><div class="ttdeci">short center</div><div class="ttdoc">Originating center.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00149">grib2_int.h:149</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_afef2b1103683c1aa3333fa7d5a83db01"><div class="ttname"><a href="grib2__int_8h.html#afef2b1103683c1aa3333fa7d5a83db01">g2c_message_info::file</a></div><div class="ttdeci">struct g2c_file_info * file</div><div class="ttdoc">Pointer to containing file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00163">grib2_int.h:163</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_affe809d466e10244055a71487aaa43cb"><div class="ttname"><a href="grib2__int_8h.html#affe809d466e10244055a71487aaa43cb">g2c_section4_info::prod_def</a></div><div class="ttdeci">unsigned short prod_def</div><div class="ttdoc">Product definition template number (See Table 4.0).</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00210">grib2_int.h:210</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__dim__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__dim__info">g2c_dim_info</a></div><div class="ttdoc">Keep information about dimensions defined in section 3.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00183">grib2_int.h:184</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__file__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__file__info">g2c_file_info</a></div><div class="ttdoc">This is the information about each open file.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00235">grib2_int.h:236</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__message__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__message__info">g2c_message_info</a></div><div class="ttdoc">This is the information about each message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00133">grib2_int.h:134</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__section3__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__section3__info">g2c_section3_info</a></div><div class="ttdoc">Information about Section 3 GRID DEFINITION SECTION.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00193">grib2_int.h:194</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__section4__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__section4__info">g2c_section4_info</a></div><div class="ttdoc">Information about Section 4 PRODUCT DEFINITION SECTION.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00206">grib2_int.h:207</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__section5__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__section5__info">g2c_section5_info</a></div><div class="ttdoc">Information about Section 5 DATA REPRESENTATION SECTION.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00216">grib2_int.h:217</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__section6__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__section6__info">g2c_section6_info</a></div><div class="ttdoc">Information about Section 6 BIT-MAP SECTION.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00227">grib2_int.h:228</a></div></div>
<div class="ttc" id="agrib2__int_8h_html_structg2c__section__info"><div class="ttname"><a href="grib2__int_8h.html#structg2c__section__info">g2c_section_info</a></div><div class="ttdoc">Information about a section 3 through 7 in a GRIB2 message.</div><div class="ttdef"><b>Definition:</b> <a href="grib2__int_8h_source.html#l00168">grib2_int.h:169</a></div></div>
<div class="ttc" id="agridtemplates_8c_html_af43657d544d6892fcfce2bb11a615ab6"><div class="ttname"><a href="gridtemplates_8c.html#af43657d544d6892fcfce2bb11a615ab6">g2c_get_grid_template</a></div><div class="ttdeci">int g2c_get_grid_template(int grid_template_num, int *maplen, int *map, int *needext)</div><div class="ttdoc">Get grid template information.</div><div class="ttdef"><b>Definition:</b> <a href="gridtemplates_8c_source.html#l00376">gridtemplates.c:376</a></div></div>
<div class="ttc" id="apdstemplates_8c_html_a5d014a6e14c17d59ce83f78ca048d86b"><div class="ttname"><a href="pdstemplates_8c.html#a5d014a6e14c17d59ce83f78ca048d86b">g2c_get_pds_template</a></div><div class="ttdeci">int g2c_get_pds_template(int pds_template_num, int *maplen, int *map, int *needext)</div><div class="ttdoc">Get PDS template information.</div><div class="ttdef"><b>Definition:</b> <a href="pdstemplates_8c_source.html#l00816">pdstemplates.c:816</a></div></div>
<div class="ttc" id="aseekgb_8c_html_a27edb1018106a2e02743be31afc5ea0c"><div class="ttname"><a href="seekgb_8c.html#a27edb1018106a2e02743be31afc5ea0c">seekgb</a></div><div class="ttdeci">void seekgb(FILE *lugb, g2int iseek, g2int mseek, g2int *lskip, g2int *lgrib)</div><div class="ttdoc">Search a file for the next GRIB Message.</div><div class="ttdef"><b>Definition:</b> <a href="seekgb_8c_source.html#l00046">seekgb.c:46</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="g2cfile_8c.html">g2cfile.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
