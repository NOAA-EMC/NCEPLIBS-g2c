<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2c: g2_getfld.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2c
   &#160;<span id="projectnumber">1.8.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('g2__getfld_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">g2_getfld.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Return all the metadata, template values, Bit-map (if applicable), and the unpacked data for a given data field.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="grib2__int_8h_source.html">grib2_int.h</a>&quot;</code><br />
</div>
<p><a href="g2__getfld_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abad9d3ba0ee798acd442850573fc6b8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2__getfld_8c.html#abad9d3ba0ee798acd442850573fc6b8e">g2_getfld</a> (unsigned char *cgrib, <a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a> ifldnum, <a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a> unpack, <a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a> expand, <a class="el" href="grib2_8h.html#structgribfield">gribfield</a> **gfld)</td></tr>
<tr class="memdesc:abad9d3ba0ee798acd442850573fc6b8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine returns all the metadata, template values, bit-map (if applicable), and the unpacked data for a given data field.  <a href="g2__getfld_8c.html#abad9d3ba0ee798acd442850573fc6b8e">More...</a><br /></td></tr>
<tr class="separator:abad9d3ba0ee798acd442850573fc6b8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Return all the metadata, template values, Bit-map (if applicable), and the unpacked data for a given data field. </p>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2002-10-28 </dd></dl>

<p class="definition">Definition in file <a class="el" href="g2__getfld_8c_source.html">g2_getfld.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abad9d3ba0ee798acd442850573fc6b8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad9d3ba0ee798acd442850573fc6b8e">&#9670;&nbsp;</a></span>g2_getfld()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a> g2_getfld </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a>&#160;</td>
          <td class="paramname"><em>ifldnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a>&#160;</td>
          <td class="paramname"><em>unpack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="grib2_8h.html#af0b63b0e0f41f07f562a4367e2a60838">g2int</a>&#160;</td>
          <td class="paramname"><em>expand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="grib2_8h.html#structgribfield">gribfield</a> **&#160;</td>
          <td class="paramname"><em>gfld</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine returns all the metadata, template values, bit-map (if applicable), and the unpacked data for a given data field. </p>
<p>All of the information returned is stored in a gribfield structure, which is defined in file <a class="el" href="grib2_8h.html" title="Header file for NCEPLIBS-g2c library.">grib2.h</a>. Users of this routine will need to include <a class="el" href="grib2_8h.html" title="Header file for NCEPLIBS-g2c library.">grib2.h</a> in their source code that calls this routine.</p>
<p>Since there can be multiple data fields packed into a GRIB2 message, the calling routine indicates which field is being requested with the ifldnum argument.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Program History Log</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date   </th><th class="markdownTableHeadNone">Programmer   </th><th class="markdownTableHeadNone">Comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2002-10-28   </td><td class="markdownTableBodyNone">Gilbert   </td><td class="markdownTableBodyNone">Initial    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2013-08-08   </td><td class="markdownTableBodyNone">Vuong   </td><td class="markdownTableBodyNone">Free up memory in array igds - free(igds)   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cgrib</td><td>Character pointer to the GRIB2 message. </td></tr>
    <tr><td class="paramname">ifldnum</td><td>Specifies which field in the GRIB2 message to return. The first field is number 1, Fortran style. </td></tr>
    <tr><td class="paramname">unpack</td><td>Boolean value indicating whether to unpack bitmap/data field.<ul>
<li>1 unpack bitmap (if present) and data values.</li>
<li>0 do not unpack bitmap and data values. </li>
</ul>
</td></tr>
    <tr><td class="paramname">expand</td><td>Boolean value indicating whether the data points should be expanded to the correspond grid, if a bit-map is present. This argument is ignored if unpack == 0 OR if the returned field does not contain a bit-map.<ul>
<li>1 if possible, expand data field to grid, inserting zero values at gridpoints that are bitmapped out. (SEE REMARKS2)</li>
<li>0 do not expand data field, leaving it an array of consecutive data points for each "1" in the bitmap. </li>
</ul>
</td></tr>
    <tr><td class="paramname">gfld</td><td>pointer to structure gribfield containing all decoded data for the data field.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="grib2_8h.html#a94af4623709fa1c08f8035b98e7ca56b" title="Function succeeded.">G2_NO_ERROR</a> no error</li>
<li><a class="el" href="grib2_8h.html#a9600b70ed48d9ee91c366c3d2aaaebb3" title="g2_getfld() can&#39;t find beginning characters &quot;GRIB&quot;.">G2_GETFLD_NO_GRIB</a> Beginning characters "GRIB" not found.</li>
<li><a class="el" href="grib2_8h.html#a3c94f1f792106e97d1e4cc2fe674e9ef" title="Wrong GRIB version for g2_getfld(), must be 2.">G2_GETFLD_GRIB_VERSION</a> GRIB message is not Edition 2.</li>
<li><a class="el" href="grib2_8h.html#a2915a7e9bd01c1b2bd33a6e362c88acc" title="g2_getfld() data field request number was not positive.">G2_GETFLD_INVAL</a> The data field request number was not positive.</li>
<li><a class="el" href="grib2_8h.html#a8ebd7f4cdc757b37d8cf344c17329936" title="g2_info() found &quot;7777&quot; not where expected.">G2_GETFLD_WRONG_END</a> End string "7777" found, but not where expected.</li>
<li><a class="el" href="grib2_8h.html#a49e78acc21d879a88d3fb21866878ef6" title="In g2_getfld() message did not contain the requested number of data fields.">G2_GETFLD_WRONG_NFLDS</a> GRIB message did not contain the requested number of data fields.</li>
<li><a class="el" href="grib2_8h.html#ae5716ebe302534d9fc24cf328bade4df" title="g2_getfld() didn&#39;t find &quot;7777&quot; at end of message.">G2_GETFLD_BAD_END</a> End string "7777" not found at end of message.</li>
<li><a class="el" href="grib2_8h.html#afeef0a49033cd2735140f87dfe0fe49f" title="g2_getfld() encountered unrecognized section.">G2_GETFLD_INVAL_SEC</a> Unrecognized Section encountered.</li>
<li><a class="el" href="grib2_8h.html#ac2734aa4f2d3f10a642b3d7919563dcc" title="In g2_getfld(), Data Representation Template not implemented.">G2_GETFLD_NO_DRT</a> Data Representation Template 5.NN not yet implemented.</li>
<li><a class="el" href="grib2_8h.html#a57517913da70932f0c56f076207ea90b" title="Error in g2_getfld() unpacking section 1.">G2_GETFLD_BAD_SEC1</a> Error unpacking Section 1.</li>
<li><a class="el" href="grib2_8h.html#a4f8b8ce8eb11ed2de38710863323f41a" title="Error in g2_getfld() unpacking section 2.">G2_GETFLD_BAD_SEC2</a> Error unpacking Section 2.</li>
<li><a class="el" href="grib2_8h.html#ad101a194bd4c5c6c0a0dd9aaa6fb9905" title="Error in g2_getfld() unpacking section 3.">G2_GETFLD_BAD_SEC3</a> Error unpacking Section 3.</li>
<li><a class="el" href="grib2_8h.html#a94364236b4274588b2b4b6b851555e15" title="Error in g2_getfld() unpacking section 4.">G2_GETFLD_BAD_SEC4</a> Error unpacking Section 4.</li>
<li><a class="el" href="grib2_8h.html#a6065be2bee7e56c7eb0d3673a70be727" title="Error in g2_getfld() unpacking section 5.">G2_GETFLD_BAD_SEC5</a> Error unpacking Section 5.</li>
<li><a class="el" href="grib2_8h.html#ab2d294bedc5fda5e67800bef91b6de44" title="Error in g2_getfld() unpacking section 6.">G2_GETFLD_BAD_SEC6</a> Error unpacking Section 6.</li>
<li><a class="el" href="grib2_8h.html#a115c0b1461732602197d7129cb783938" title="Error in g2_getfld() unpacking section 7.">G2_GETFLD_BAD_SEC7</a> Error unpacking Section 7.</li>
<li><a class="el" href="grib2_8h.html#aee39ba22e9351cf0b7f2813bd1b5dd7e" title="In g2_getfld() previous bitmap specified, yet none exists.">G2_GETFLD_NO_BITMAP</a> Previous bitmap specified, yet none exists.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Struct gribfield is allocated by this routine and it also contains pointers to many arrays of data that were allocated during decoding. Users are encouraged to free up this memory, when it is no longer needed, by an explicit call to routine <a class="el" href="g2__free_8c.html#a084c47c8f83bb5a5c7799753ac7b6f02" title="This routine frees up memory that was allocated for struct gribfield.">g2_free()</a>.</dd></dl>
<h2><a class="anchor" id="autotoc_md14"></a>
Example:</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="grib2_8h.html">grib2.h</a>&quot;</span></div>
<div class="line"><a class="code" href="grib2_8h.html#structgribfield">gribfield</a> *gfld;</div>
<div class="line">ret=<a class="code" href="g2__getfld_8c.html#abad9d3ba0ee798acd442850573fc6b8e">g2_getfld</a>(cgrib,1,1,1,&amp;gfld);</div>
<div class="line">  ...</div>
<div class="line">g2_free(gfld);</div>
<div class="ttc" id="ag2__getfld_8c_html_abad9d3ba0ee798acd442850573fc6b8e"><div class="ttname"><a href="g2__getfld_8c.html#abad9d3ba0ee798acd442850573fc6b8e">g2_getfld</a></div><div class="ttdeci">g2int g2_getfld(unsigned char *cgrib, g2int ifldnum, g2int unpack, g2int expand, gribfield **gfld)</div><div class="ttdoc">This subroutine returns all the metadata, template values, bit-map (if applicable),...</div><div class="ttdef"><b>Definition:</b> <a href="g2__getfld_8c_source.html#l00091">g2_getfld.c:91</a></div></div>
<div class="ttc" id="agrib2_8h_html"><div class="ttname"><a href="grib2_8h.html">grib2.h</a></div><div class="ttdoc">Header file for NCEPLIBS-g2c library.</div></div>
<div class="ttc" id="agrib2_8h_html_structgribfield"><div class="ttname"><a href="grib2_8h.html#structgribfield">gribfield</a></div><div class="ttdoc">Struct for GRIB field.</div><div class="ttdef"><b>Definition:</b> <a href="grib2_8h_source.html#l00044">grib2.h:45</a></div></div>
</div><!-- fragment --><p>Routine <a class="el" href="g2__info_8c.html#abf8ecb0fe00805abfce20115357b4fa3" title="This subroutine searches through a GRIB2 message and returns the number of gridded fields found in th...">g2_info()</a> can be used to first determine how many data fields exist in a given GRIB message.</p>
<dl class="section note"><dt>Note</dt><dd>It may not always be possible to expand a bit-mapped data field. If a pre-defined bit-map is used and not included in the GRIB2 message itself, this routine would not have the necessary information to expand the data. In this case, gfld-&gt;expanded would would be set to 0 (false), regardless of the value of input argument expand.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2002-10-28 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2__getfld_8c_source.html#l00091">91</a> of file <a class="el" href="g2__getfld_8c_source.html">g2_getfld.c</a>.</p>

<p class="reference">References <a class="el" href="grib2_8h_source.html#l00214">gribfield::bmap</a>, <a class="el" href="grib2_8h_source.html#l00175">gribfield::coord_list</a>, <a class="el" href="grib2_8h_source.html#l00051">gribfield::discipline</a>, <a class="el" href="grib2_8h_source.html#l00202">gribfield::expanded</a>, <a class="el" href="grib2_8h_source.html#l00217">gribfield::fld</a>, <a class="el" href="g2__free_8c_source.html#l00024">g2_free()</a>, <a class="el" href="grib2_8h_source.html#l00436">G2_GETFLD_BAD_END</a>, <a class="el" href="grib2_8h_source.html#l00439">G2_GETFLD_BAD_SEC1</a>, <a class="el" href="grib2_8h_source.html#l00440">G2_GETFLD_BAD_SEC2</a>, <a class="el" href="grib2_8h_source.html#l00441">G2_GETFLD_BAD_SEC3</a>, <a class="el" href="grib2_8h_source.html#l00442">G2_GETFLD_BAD_SEC4</a>, <a class="el" href="grib2_8h_source.html#l00443">G2_GETFLD_BAD_SEC5</a>, <a class="el" href="grib2_8h_source.html#l00444">G2_GETFLD_BAD_SEC6</a>, <a class="el" href="grib2_8h_source.html#l00445">G2_GETFLD_BAD_SEC7</a>, <a class="el" href="grib2_8h_source.html#l00432">G2_GETFLD_GRIB_VERSION</a>, <a class="el" href="grib2_8h_source.html#l00433">G2_GETFLD_INVAL</a>, <a class="el" href="grib2_8h_source.html#l00437">G2_GETFLD_INVAL_SEC</a>, <a class="el" href="grib2_8h_source.html#l00446">G2_GETFLD_NO_BITMAP</a>, <a class="el" href="grib2_8h_source.html#l00431">G2_GETFLD_NO_GRIB</a>, <a class="el" href="grib2_8h_source.html#l00434">G2_GETFLD_WRONG_END</a>, <a class="el" href="grib2_8h_source.html#l00435">G2_GETFLD_WRONG_NFLDS</a>, <a class="el" href="grib2_8h_source.html#l00423">G2_NO_ERROR</a>, <a class="el" href="g2__unpack1_8c_source.html#l00055">g2_unpack1()</a>, <a class="el" href="g2__unpack2_8c_source.html#l00038">g2_unpack2()</a>, <a class="el" href="g2__unpack3_8c_source.html#l00062">g2_unpack3()</a>, <a class="el" href="g2__unpack4_8c_source.html#l00046">g2_unpack4()</a>, <a class="el" href="g2__unpack5_8c_source.html#l00042">g2_unpack5()</a>, <a class="el" href="g2__unpack6_8c_source.html#l00033">g2_unpack6()</a>, <a class="el" href="g2__unpack7_8c_source.html#l00207">g2_unpack7()</a>, <a class="el" href="gbits_8c_source.html#l00020">gbit()</a>, <a class="el" href="grib2_8h_source.html#l00119">gribfield::griddef</a>, <a class="el" href="grib2_8h_source.html#l00210">gribfield::ibmap</a>, <a class="el" href="grib2_8h_source.html#l00185">gribfield::idrtlen</a>, <a class="el" href="grib2_8h_source.html#l00189">gribfield::idrtmpl</a>, <a class="el" href="grib2_8h_source.html#l00182">gribfield::idrtnum</a>, <a class="el" href="grib2_8h_source.html#l00099">gribfield::idsect</a>, <a class="el" href="grib2_8h_source.html#l00102">gribfield::idsectlen</a>, <a class="el" href="grib2_8h_source.html#l00112">gribfield::ifldnum</a>, <a class="el" href="grib2_8h_source.html#l00151">gribfield::igdtlen</a>, <a class="el" href="grib2_8h_source.html#l00155">gribfield::igdtmpl</a>, <a class="el" href="grib2_8h_source.html#l00147">gribfield::igdtnum</a>, <a class="el" href="grib2_8h_source.html#l00132">gribfield::interp_opt</a>, <a class="el" href="grib2_8h_source.html#l00163">gribfield::ipdtlen</a>, <a class="el" href="grib2_8h_source.html#l00167">gribfield::ipdtmpl</a>, <a class="el" href="grib2_8h_source.html#l00159">gribfield::ipdtnum</a>, <a class="el" href="grib2_8h_source.html#l00143">gribfield::list_opt</a>, <a class="el" href="grib2_8h_source.html#l00106">gribfield::local</a>, <a class="el" href="grib2_8h_source.html#l00109">gribfield::locallen</a>, <a class="el" href="grib2_8h_source.html#l00178">gribfield::ndpts</a>, <a class="el" href="grib2_8h_source.html#l00122">gribfield::ngrdpts</a>, <a class="el" href="grib2_8h_source.html#l00170">gribfield::num_coord</a>, <a class="el" href="grib2_8h_source.html#l00138">gribfield::num_opt</a>, <a class="el" href="grib2_8h_source.html#l00127">gribfield::numoct_opt</a>, <a class="el" href="grib2_8h_source.html#l00193">gribfield::unpacked</a>, and <a class="el" href="grib2_8h_source.html#l00047">gribfield::version</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="g2__getfld_8c.html">g2_getfld.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
